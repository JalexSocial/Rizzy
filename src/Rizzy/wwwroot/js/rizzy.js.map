{"version":3,"file":"rizzy.js","sources":["../../src/js/rizzy-nonce.js","../../src/js/rizzy-streaming.js","../../node_modules/aspnet-client-validation/dist/aspnet-validation.js","../../src/js/antiforgerySnippet.js","../../src/js/rizzy.js"],"sourcesContent":["//import htmx from 'htmx.org';\r\n\r\n(function() {\r\n    \r\n    htmx.defineExtension('rizzy-nonce',\r\n        {\r\n            transformResponse: function(text, xhr, elt) {\r\n\r\n                let documentNonce = htmx.config.documentNonce ?? htmx.config.inlineScriptNonce;\r\n\r\n                if (!documentNonce) {\r\n                    console.warn(\"rizzy-nonce extension loaded but no no nonce found for document. Inline scripts may be blocked.\");\r\n                    documentNonce = \"\";\r\n                }\r\n\r\n                // disable ajax fetching on history miss because it doesn't handle nonce replacment\r\n                htmx.config.refreshOnHistoryMiss = true; \r\n\r\n                // CSP nonce determination based on safe-nonce by Michael West\r\n                let nonce = xhr?.getResponseHeader('HX-Nonce');\r\n                if (!nonce) {\r\n                    const csp = xhr?.getResponseHeader('content-security-policy');\r\n                    if (csp) {\r\n                        const cspMatch = csp.match(/(style|script)-src[^;]*'nonce-([^']*)'/i);\r\n                        if (cspMatch) {\r\n                            nonce = cspMatch[2];\r\n                        }\r\n                    }\r\n                }\r\n                if (xhr && window.location.hostname) {\r\n                    const responseURL = new URL(xhr.responseURL);\r\n                    if (responseURL.hostname !== window.location.hostname) {\r\n                        nonce = ''; // ignore nonce header if request is not some domain \r\n                    }\r\n                }\r\n\r\n                nonce ??= '';\r\n\r\n                return this.processUnsafeHtml(text, documentNonce, nonce);\r\n            },\r\n            processUnsafeHtml: function(text, documentNonce, newScriptNonce) {\r\n                //const noncePattern = new RegExp(`(['\"])${newScriptNonce}\\\\1`, 'gi');\r\n\r\n                // Replace any occurrences of the nonce provided by the server with\r\n                // the existing document nonce. Note that at minimum the server text originates\r\n                // from is same-origin and the newScriptNonce that is replaced is determined\r\n                // from response headers which are only available when processing the xmlHttpRequest\r\n                if (documentNonce && newScriptNonce)\r\n                    text = text.replaceAll(newScriptNonce, documentNonce);\r\n\r\n                const parser = new DOMParser();\r\n\r\n                try {\r\n                    // At this point any remaining elements that don't have the correct\r\n                    // nonce will cause console errors to be emitted. We are going to strip\r\n                    // out those elements and any attempts to block rizzy-nonce in the included markup.\r\n                    let doc = parser.parseFromString(text, \"text/html\");\r\n\r\n                    if (doc) {\r\n                        // Remove any attempts to disable rizzy-nonce extension\r\n                        Array.from(doc.querySelectorAll('[hx-ext*=\"ignore:rizzy-nonce\"], [data-hx-ext*=\"ignore:rizzy-nonce\"]'))\r\n                            .forEach((elt) => {\r\n                                elt.remove();\r\n                            });\r\n\r\n                        // Select all <script> and <style> tags\r\n                        const elements = doc.querySelectorAll(\"script, style, link\");\r\n\r\n                        // Iterate through each element\r\n                        elements.forEach(elt => {\r\n                            const nonce = elt.getAttribute(\"nonce\");\r\n                            if (nonce !== documentNonce) {\r\n                                // Remove the element if the nonce doesn't match (or is missing)\r\n                                elt.remove();\r\n                            }\r\n                        });\r\n\r\n                        // Serialize the document back into an HTML string and return it\r\n                        return doc.documentElement.outerHTML;\r\n                    }\r\n\r\n                } catch (_) { }\r\n                {\r\n\r\n                }\r\n\r\n                return '';\r\n\r\n            }\r\n        });\r\n\r\n})()","/*\r\n * Blazor Stream Rendering HTMX Extension\r\n * Author: Michael Tanczos\r\n * Credits to SSE extension and Microsoft aspnetcore\r\n * at https://github.com/dotnet/aspnetcore/blob/main/src/Components/Web.JS/src/Rendering/StreamingRendering.ts\r\n */\r\n//import htmx from 'htmx.org';\r\n\r\n(function () {\r\n\r\n    var api;\r\n    var enableDomPreservation = true;\r\n    var componentLoaded = false;\r\n\r\n    class blazorStreamingUpdate extends HTMLElement {\r\n        connectedCallback() {\r\n            const blazorSsrElement = this.parentNode;\r\n\r\n            // Synchronously remove this from the DOM to minimize our chance of affecting anything else\r\n            blazorSsrElement.parentNode?.removeChild(blazorSsrElement);\r\n\r\n            // When this element receives content, if it's <template blazor-component-id=\"...\">...</template>,\r\n            // insert the template content into the DOM\r\n            blazorSsrElement.childNodes.forEach(node => {\r\n                if (node instanceof HTMLTemplateElement) {\r\n                    const componentId = node.getAttribute(\"blazor-component-id\");\r\n                    if (componentId) {\r\n                        insertStreamingContentIntoDocument(componentId, node.content);\r\n                    }\r\n                }\r\n            });\r\n\r\n            htmx?.process(document.body);\r\n        }\r\n    }\r\n\r\n    htmx.defineExtension(\"rizzy-streaming\",\r\n        {\r\n            /**\r\n             * Init saves the provided reference to the internal HTMX API.\r\n             *\r\n             * @param {import(\"../htmx\").HtmxInternalApi} api\r\n             * @returns void\r\n             */\r\n            init: function (apiRef) {\r\n                // store a reference to the internal API.\r\n                api = apiRef;\r\n\r\n                // set a function in the public API for creating new EventSource objects\r\n                if (htmx.blazorSwapSsr == undefined) {\r\n                    if (customElements.get('blazor-ssr-end') === undefined) {\r\n                        customElements.define('blazor-ssr-end', blazorStreamingUpdate);\r\n                    }\r\n                    htmx.blazorSwapSsr = blazorSwapSsr;\r\n                }\r\n            },\r\n            onEvent: function (name, evt) {\r\n                if (name === \"htmx:afterOnLoad\") {\r\n                    htmx?.process(document.body);\r\n                }\r\n                else if (name === \"htmx:beforeRequest\") {\r\n                    var element = evt.detail.elt;\r\n                    if (evt.detail.requestConfig.target) {\r\n                        evt.detail.requestConfig.target.addEventListener(\"htmx:beforeSwap\",\r\n                            e => {\r\n                                // Any html that was already streamed in could have been updated with\r\n                                // blazor ssr content so the final xhr response can be thrown away\r\n                                //e.detail.shouldSwap = false;\r\n                            }, { once: true });\r\n                    }\r\n\r\n                    var last = 0;\r\n                    var swapSpec = api.getSwapSpecification(element);\r\n                    var xhr = evt.detail.xhr;\r\n\r\n                    // Create a container id for a temporary div container. All streamed html will be placed \r\n                    // inside the container so that htmx swap methods work correctly\r\n                    var cid = 'ctr' + crypto.randomUUID();\r\n\r\n                    xhr.addEventListener(\"readystatechange\", () => {\r\n\r\n                        // If finished we can unwrap the container all html was stored into\r\n                        if (xhr.readyState === 4) {\r\n                            var container = document.getElementById(cid);\r\n\r\n                            if (container != null)\r\n                                unwrap(container);\r\n                        }\r\n                    });\r\n\r\n                    xhr.addEventListener(\"progress\", e => {\r\n\r\n                        var container = document.getElementById(cid);\r\n\r\n                        // If the container doesn't exist we need to create it and swap it into the element\r\n                        // target space. From here on we can stream responses into the container directly.\r\n                        if (container == null) {\r\n                            container = document.createElement('div');\r\n                            container.id = cid;\r\n\r\n                            // Swap in a container div to hold the streaming html\r\n                            swap(element, container.outerHTML, swapSpec, xhr);\r\n\r\n                            // The very first swap into the container can be a replacement swap\r\n                            swapSpec.swapStyle = \"innerHTML\";\r\n\r\n                            // Ensure there is always a container even if not added to the dom\r\n                            container = document.getElementById(cid) ?? container;\r\n                        }\r\n\r\n                        // Compute any new html in this chunk\r\n                        let diff = e.currentTarget.response.substring(last);\r\n                        swap(container, diff, swapSpec, xhr);\r\n\r\n                        swapSpec.settleDelay = 0;\r\n                        swapSpec.swapStyle = \"beforeend\";\r\n                        last = e.loaded;\r\n                    });\r\n\r\n                }\r\n\r\n                return true;\r\n            }\r\n        });\r\n\r\n    function isCommentNodeInHead(commentNode) {\r\n        // Ensure that the provided node is indeed a comment node\r\n        if (commentNode && commentNode.nodeType === Node.COMMENT_NODE) {\r\n            let currentNode = commentNode.parentNode;\r\n            // Traverse up the DOM tree\r\n            while (currentNode !== null) {\r\n                if (currentNode === document.head) {\r\n                    // The comment node is within the <head>\r\n                    return true;\r\n                }\r\n                currentNode = currentNode.parentNode;\r\n            }\r\n        } else {\r\n            return false;\r\n        }\r\n        // The traversal reached the root without finding <head>, or <head> does not exist\r\n        return false;\r\n    }\r\n\r\n    function blazorSwapSsr(start, end, docFrag, xhr) {\r\n        var newDiv = wrap(start, end, 'ssr' + crypto.randomUUID());\r\n\r\n        var container = document.createElement('div');\r\n        container.appendChild(docFrag);\r\n\r\n        swap(newDiv, container.innerHTML, xhr);\r\n\r\n        unwrap(newDiv);\r\n    }\r\n\r\n    function wrap(start, end, id) {\r\n\r\n        var newDiv = document.createElement('div');\r\n        newDiv.id = id;\r\n\r\n        // Iterate through nodes between start and end\r\n        var currentNode = start.nextSibling;\r\n        while (currentNode && currentNode !== end) {\r\n            newDiv.appendChild(currentNode);\r\n            currentNode = start.nextSibling;\r\n        }\r\n\r\n        start.parentNode.insertBefore(newDiv, end);\r\n\r\n        return newDiv;\r\n    }\r\n\r\n    function unwrap(element) {\r\n        // Ensure that the element has a parent\r\n        if (element.parentNode) {\r\n            // Move all child nodes out of the element\r\n            while (element.firstChild) {\r\n                element.parentNode.insertBefore(element.firstChild, element);\r\n            }\r\n\r\n            // Remove the empty element\r\n            element.parentNode.removeChild(element);\r\n        }\r\n    }\r\n\r\n    function handleOutOfBandSwaps(elt, fragment, settleInfo) {\r\n        var oobSelects = api.getClosestAttributeValue(elt, \"hx-select-oob\");\r\n        if (oobSelects) {\r\n            var oobSelectValues = oobSelects.split(\",\");\r\n            for (var i = 0; i < oobSelectValues.length; i++) {\r\n                var oobSelectValue = oobSelectValues[i].split(\":\", 2);\r\n                var id = oobSelectValue[0].trim();\r\n                if (id.indexOf(\"#\") === 0) {\r\n                    id = id.substring(1);\r\n                }\r\n                var oobValue = oobSelectValue[1] || \"true\";\r\n                var oobElement = fragment.querySelector(\"#\" + id);\r\n                if (oobElement) {\r\n                    api.oobSwap(oobValue, oobElement, settleInfo);\r\n                }\r\n            }\r\n        }\r\n        forEach(findAll(fragment, '[hx-swap-oob], [data-hx-swap-oob]'), function (oobElement) {\r\n            var oobValue = getAttributeValue(oobElement, \"hx-swap-oob\");\r\n            if (oobValue != null) {\r\n                api.oobSwap(oobValue, oobElement, settleInfo);\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * @param {HTMLElement} elt\r\n     * @param {string} content\r\n     */\r\n    function swap(elt, content, swapSpec, xhr) {\r\n\r\n        api.withExtensions(elt, function (extension) {\r\n            content = extension.transformResponse(content, xhr, elt);\r\n        });\r\n\r\n        swapSpec ??= api.getSwapSpecification(elt);\r\n        var target = api.getTarget(elt);\r\n        var settleInfo = api.makeSettleInfo(elt);\r\n\r\n        // htmx 2.0\r\n        api.swap(target, content, swapSpec);\r\n\r\n        //api.selectAndSwap(swapSpec.swapStyle, target, elt, content, settleInfo);\r\n\r\n        settleInfo.elts.forEach(function (elt) {\r\n            if (elt.classList) {\r\n                elt.classList.add(htmx.config.settlingClass);\r\n            }\r\n            api.triggerEvent(elt, 'htmx:beforeSettle');\r\n        });\r\n\r\n        // Handle settle tasks (with delay if requested)\r\n        if (swapSpec.settleDelay > 0) {\r\n            setTimeout(doSettle(settleInfo), swapSpec.settleDelay);\r\n        } else {\r\n            doSettle(settleInfo)();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * doSettle mirrors much of the functionality in htmx that\r\n     * settles elements after their content has been swapped.\r\n     * TODO: this should be published by htmx, and not duplicated here\r\n     * @param {import(\"../htmx\").HtmxSettleInfo} settleInfo\r\n     * @returns () => void\r\n     */\r\n    function doSettle(settleInfo) {\r\n\r\n        return function () {\r\n            settleInfo.tasks.forEach(function (task) {\r\n                task.call();\r\n            });\r\n\r\n            settleInfo.elts.forEach(function (elt) {\r\n                if (elt.classList) {\r\n                    elt.classList.remove(htmx.config.settlingClass);\r\n                }\r\n                api.triggerEvent(elt, 'htmx:afterSettle');\r\n            });\r\n        }\r\n    }\r\n\r\n    function insertStreamingContentIntoDocument(componentIdAsString, docFrag) {\r\n        const markers = findStreamingMarkers(componentIdAsString)\r\n        if (markers) {\r\n            const { startMarker, endMarker } = markers\r\n            enableDomPreservation = !isCommentNodeInHead(startMarker);\r\n            if (enableDomPreservation) {\r\n                blazorSwapSsr(startMarker, endMarker, docFrag);\r\n            } else {\r\n                // In this mode we completely delete the old content before inserting the new content\r\n                const destinationRoot = endMarker.parentNode\r\n                const existingContent = new Range()\r\n                existingContent.setStart(startMarker, startMarker.textContent.length)\r\n                existingContent.setEnd(endMarker, 0)\r\n                existingContent.deleteContents()\r\n\r\n                while (docFrag.childNodes[0]) {\r\n                    destinationRoot.insertBefore(docFrag.childNodes[0], endMarker)\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    function findStreamingMarkers(componentIdAsString) {\r\n        // Find start marker\r\n        const expectedStartText = `bl:${componentIdAsString}`\r\n        const iterator = document.createNodeIterator(\r\n            document,\r\n            NodeFilter.SHOW_COMMENT\r\n        )\r\n        let startMarker = null\r\n        while ((startMarker = iterator.nextNode())) {\r\n            if (startMarker.textContent === expectedStartText) {\r\n                break\r\n            }\r\n        }\r\n\r\n        if (!startMarker) {\r\n            return null\r\n        }\r\n\r\n        // Find end marker\r\n        const expectedEndText = `/bl:${componentIdAsString}`\r\n        let endMarker = null\r\n        while ((endMarker = iterator.nextNode())) {\r\n            if (endMarker.textContent === expectedEndText) {\r\n                break\r\n            }\r\n        }\r\n\r\n        return endMarker ? { startMarker, endMarker } : null\r\n    }\r\n})();","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"aspnetValidation\"] = factory();\n\telse\n\t\troot[\"aspnetValidation\"] = factory();\n})(self, () => {\nreturn /******/ (() => { // webpackBootstrap\n/******/ \t\"use strict\";\n/******/ \t// The require scope\n/******/ \tvar __webpack_require__ = {};\n/******/ \t\n/************************************************************************/\n/******/ \t/* webpack/runtime/define property getters */\n/******/ \t(() => {\n/******/ \t\t// define getter functions for harmony exports\n/******/ \t\t__webpack_require__.d = (exports, definition) => {\n/******/ \t\t\tfor(var key in definition) {\n/******/ \t\t\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n/******/ \t\t\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n/******/ \t\t\t\t}\n/******/ \t\t\t}\n/******/ \t\t};\n/******/ \t})();\n/******/ \t\n/******/ \t/* webpack/runtime/hasOwnProperty shorthand */\n/******/ \t(() => {\n/******/ \t\t__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))\n/******/ \t})();\n/******/ \t\n/******/ \t/* webpack/runtime/make namespace object */\n/******/ \t(() => {\n/******/ \t\t// define __esModule on exports\n/******/ \t\t__webpack_require__.r = (exports) => {\n/******/ \t\t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n/******/ \t\t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n/******/ \t\t\t}\n/******/ \t\t\tObject.defineProperty(exports, '__esModule', { value: true });\n/******/ \t\t};\n/******/ \t})();\n/******/ \t\n/************************************************************************/\nvar __webpack_exports__ = {};\n/*!**********************!*\\\n  !*** ./src/index.ts ***!\n  \\**********************/\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   MvcValidationProviders: () => (/* binding */ MvcValidationProviders),\n/* harmony export */   ValidationService: () => (/* binding */ ValidationService),\n/* harmony export */   isValidatable: () => (/* binding */ isValidatable)\n/* harmony export */ });\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (undefined && undefined.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar nullLogger = new (/** @class */ (function () {\n    function class_1() {\n        this.warn = globalThis.console.warn;\n    }\n    class_1.prototype.log = function (_) {\n        var _args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            _args[_i - 1] = arguments[_i];\n        }\n    };\n    return class_1;\n}()))();\n/**\n * Checks if `element` is validatable (`input`, `select`, `textarea`).\n * @param element The element to check.\n * @returns `true` if validatable, otherwise `false`.\n */\nvar isValidatable = function (element) {\n    return element instanceof HTMLInputElement\n        || element instanceof HTMLSelectElement\n        || element instanceof HTMLTextAreaElement;\n};\nvar validatableElementTypes = ['input', 'select', 'textarea'];\n/**\n * Generates a selector to match validatable elements (`input`, `select`, `textarea`).\n * @param selector An optional selector to apply to the valid input types, e.g. `[data-val=\"true\"]`.\n * @returns The validatable elements.\n */\nvar validatableSelector = function (selector) {\n    return validatableElementTypes.map(function (t) { return \"\".concat(t).concat(selector || ''); }).join(',');\n};\n/**\n * Resolves and returns the element referred by original element using ASP.NET selector logic.\n * @param element - The input to validate\n * @param selector - Used to find the field. Ex. *.Password where * replaces whatever prefixes asp.net might add.\n */\nfunction getRelativeFormElement(element, selector) {\n    // example elementName: Form.PasswordConfirm, Form.Email\n    // example selector (dafuq): *.Password, *.__RequestVerificationToken\n    // example result element name: Form.Password, __RequestVerificationToken\n    var elementName = element.name;\n    var selectedName = selector.substring(2); // Password, __RequestVerificationToken\n    var objectName = '';\n    var dotLocation = elementName.lastIndexOf('.');\n    if (dotLocation > -1) {\n        // Form\n        objectName = elementName.substring(0, dotLocation);\n        // Form.Password\n        var relativeElementName = objectName + '.' + selectedName;\n        var relativeElement = document.getElementsByName(relativeElementName)[0];\n        if (isValidatable(relativeElement)) {\n            return relativeElement;\n        }\n    }\n    // __RequestVerificationToken\n    return element.form.querySelector(validatableSelector(\"[name=\".concat(selectedName, \"]\")));\n}\n/**\n * Contains default implementations for ASP.NET Core MVC validation attributes.\n */\nvar MvcValidationProviders = /** @class */ (function () {\n    function MvcValidationProviders() {\n        /**\n         * Validates whether the input has a value.\n         */\n        this.required = function (value, element, params) {\n            // Handle single and multiple checkboxes/radio buttons.\n            var elementType = element.type.toLowerCase();\n            if (elementType === \"checkbox\" || elementType === \"radio\") {\n                var allElementsOfThisName = Array.from(element.form.querySelectorAll(validatableSelector(\"[name='\".concat(element.name, \"'][type='\").concat(elementType, \"']\"))));\n                for (var _i = 0, allElementsOfThisName_1 = allElementsOfThisName; _i < allElementsOfThisName_1.length; _i++) {\n                    var element_1 = allElementsOfThisName_1[_i];\n                    if (element_1 instanceof HTMLInputElement && element_1.checked === true) {\n                        return true;\n                    }\n                }\n                // Checkboxes do not submit a value when unchecked. To work around this, platforms such as ASP.NET render a\n                // hidden input with the same name as the checkbox so that a value (\"false\") is still submitted even when\n                // the checkbox is not checked. We check this special case here.\n                if (elementType === \"checkbox\") {\n                    var checkboxHiddenInput = element.form.querySelector(\"input[name='\".concat(element.name, \"'][type='hidden']\"));\n                    if (checkboxHiddenInput instanceof HTMLInputElement && checkboxHiddenInput.value === \"false\") {\n                        return true;\n                    }\n                }\n                return false;\n            }\n            // Default behavior otherwise (trim ensures whitespace only is not seen as valid).\n            return Boolean(value === null || value === void 0 ? void 0 : value.trim());\n        };\n        /**\n         * Validates whether the input value satisfies the length contstraint.\n         */\n        this.stringLength = function (value, element, params) {\n            if (!value) {\n                return true;\n            }\n            if (params.min) {\n                var min = parseInt(params.min);\n                if (value.length < min) {\n                    return false;\n                }\n            }\n            if (params.max) {\n                var max = parseInt(params.max);\n                if (value.length > max) {\n                    return false;\n                }\n            }\n            return true;\n        };\n        /**\n         * Validates whether the input value is equal to another input value.\n         */\n        this.compare = function (value, element, params) {\n            if (!params.other) {\n                return true;\n            }\n            var otherElement = getRelativeFormElement(element, params.other);\n            if (!otherElement) {\n                return true;\n            }\n            return (otherElement.value === value);\n        };\n        /**\n         * Validates whether the input value is a number within a given range.\n         */\n        this.range = function (value, element, params) {\n            if (!value) {\n                return true;\n            }\n            var val = parseFloat(value);\n            if (isNaN(val)) {\n                return false;\n            }\n            if (params.min) {\n                var min = parseFloat(params.min);\n                if (val < min) {\n                    return false;\n                }\n            }\n            if (params.max) {\n                var max = parseFloat(params.max);\n                if (val > max) {\n                    return false;\n                }\n            }\n            return true;\n        };\n        /**\n         * Validates whether the input value satisfies a regular expression pattern.\n         */\n        this.regex = function (value, element, params) {\n            if (!value || !params.pattern) {\n                return true;\n            }\n            var r = new RegExp(params.pattern);\n            return r.test(value);\n        };\n        /**\n         * Validates whether the input value is an email in accordance to RFC822 specification, with a top level domain.\n         */\n        this.email = function (value, element, params) {\n            if (!value) {\n                return true;\n            }\n            // RFC822 email address with .TLD validation\n            // (c) Richard Willis, Chris Ferdinandi, MIT Licensed\n            // https://gist.github.com/badsyntax/719800\n            // https://gist.github.com/cferdinandi/d04aad4ce064b8da3edf21e26f8944c4\n            var r = /^([^\\x00-\\x20\\x22\\x28\\x29\\x2c\\x2e\\x3a-\\x3c\\x3e\\x40\\x5b-\\x5d\\x7f-\\xff]+|\\x22([^\\x0d\\x22\\x5c\\x80-\\xff]|\\x5c[\\x00-\\x7f])*\\x22)(\\x2e([^\\x00-\\x20\\x22\\x28\\x29\\x2c\\x2e\\x3a-\\x3c\\x3e\\x40\\x5b-\\x5d\\x7f-\\xff]+|\\x22([^\\x0d\\x22\\x5c\\x80-\\xff]|\\x5c[\\x00-\\x7f])*\\x22))*\\x40([^\\x00-\\x20\\x22\\x28\\x29\\x2c\\x2e\\x3a-\\x3c\\x3e\\x40\\x5b-\\x5d\\x7f-\\xff]+|\\x5b([^\\x0d\\x5b-\\x5d\\x80-\\xff]|\\x5c[\\x00-\\x7f])*\\x5d)(\\x2e([^\\x00-\\x20\\x22\\x28\\x29\\x2c\\x2e\\x3a-\\x3c\\x3e\\x40\\x5b-\\x5d\\x7f-\\xff]+|\\x5b([^\\x0d\\x5b-\\x5d\\x80-\\xff]|\\x5c[\\x00-\\x7f])*\\x5d))*(\\.\\w{2,})+$/;\n            return r.test(value);\n        };\n        /**\n         * Validates whether the input value is a credit card number, with Luhn's Algorithm.\n         */\n        this.creditcard = function (value, element, params) {\n            if (!value) {\n                return true;\n            }\n            // (c) jquery-validation, MIT Licensed\n            // https://github.com/jquery-validation/jquery-validation/blob/master/src/additional/creditcard.js\n            // based on https://en.wikipedia.org/wiki/Luhn_algorithm\n            // Accept only spaces, digits and dashes\n            if (/[^0-9 \\-]+/.test(value)) {\n                return false;\n            }\n            var nCheck = 0, nDigit = 0, bEven = false, n, cDigit;\n            value = value.replace(/\\D/g, \"\");\n            // Basing min and max length on https://developer.ean.com/general_info/Valid_Credit_Card_Types\n            if (value.length < 13 || value.length > 19) {\n                return false;\n            }\n            for (n = value.length - 1; n >= 0; n--) {\n                cDigit = value.charAt(n);\n                nDigit = parseInt(cDigit, 10);\n                if (bEven) {\n                    if ((nDigit *= 2) > 9) {\n                        nDigit -= 9;\n                    }\n                }\n                nCheck += nDigit;\n                bEven = !bEven;\n            }\n            return (nCheck % 10) === 0;\n        };\n        /**\n         * Validates whether the input value is a URL.\n         */\n        this.url = function (value, element, params) {\n            if (!value) {\n                return true;\n            }\n            var lowerCaseValue = value.toLowerCase();\n            // Match the logic in `UrlAttribute`\n            return lowerCaseValue.indexOf('http://') > -1\n                || lowerCaseValue.indexOf('https://') > -1\n                || lowerCaseValue.indexOf('ftp://') > -1;\n        };\n        /**\n         * Validates whether the input value is a phone number.\n         */\n        this.phone = function (value, element, params) {\n            if (!value) {\n                return true;\n            }\n            // Allows whitespace or dash as number separator because some people like to do that...\n            var consecutiveSeparator = /[\\+\\-\\s][\\-\\s]/g;\n            if (consecutiveSeparator.test(value)) {\n                return false;\n            }\n            var r = /^\\+?[0-9\\-\\s]+$/;\n            return r.test(value);\n        };\n        /**\n         * Asynchronously validates the input value to a JSON GET API endpoint.\n         */\n        this.remote = function (value, element, params) {\n            if (!value) {\n                return true;\n            }\n            // params.additionalfields: *.Email,*.Username\n            var fieldSelectors = params.additionalfields.split(',');\n            var fields = {};\n            for (var _i = 0, fieldSelectors_1 = fieldSelectors; _i < fieldSelectors_1.length; _i++) {\n                var fieldSelector = fieldSelectors_1[_i];\n                var fieldName = fieldSelector.substr(2);\n                var fieldElement = getRelativeFormElement(element, fieldSelector);\n                var hasValue = Boolean(fieldElement && fieldElement.value);\n                if (!hasValue) {\n                    continue;\n                }\n                if (fieldElement instanceof HTMLInputElement &&\n                    (fieldElement.type === 'checkbox' || fieldElement.type === 'radio')) {\n                    fields[fieldName] = fieldElement.checked ? fieldElement.value : '';\n                }\n                else {\n                    fields[fieldName] = fieldElement.value;\n                }\n            }\n            var url = params['url'];\n            var encodedParams = [];\n            for (var fieldName in fields) {\n                var encodedParam = encodeURIComponent(fieldName) + '=' + encodeURIComponent(fields[fieldName]);\n                encodedParams.push(encodedParam);\n            }\n            var payload = encodedParams.join('&');\n            return new Promise(function (ok, reject) {\n                var request = new XMLHttpRequest();\n                if (params.type && params.type.toLowerCase() === 'post') {\n                    var postData = new FormData();\n                    for (var fieldName in fields) {\n                        postData.append(fieldName, fields[fieldName]);\n                    }\n                    request.open('post', url);\n                    request.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');\n                    request.send(payload);\n                }\n                else {\n                    request.open('get', url + '?' + payload);\n                    request.send();\n                }\n                request.onload = function (e) {\n                    if (request.status >= 200 && request.status < 300) {\n                        var data = JSON.parse(request.responseText);\n                        ok(data);\n                    }\n                    else {\n                        reject({\n                            status: request.status,\n                            statusText: request.statusText,\n                            data: request.responseText\n                        });\n                    }\n                };\n                request.onerror = function (e) {\n                    reject({\n                        status: request.status,\n                        statusText: request.statusText,\n                        data: request.responseText\n                    });\n                };\n            });\n        };\n    }\n    return MvcValidationProviders;\n}());\n\n/**\n * Responsible for managing the DOM elements and running the validation providers.\n */\nvar ValidationService = /** @class */ (function () {\n    function ValidationService(logger) {\n        var _this = this;\n        /**\n         * A key-value collection of loaded validation plugins.\n         */\n        this.providers = {};\n        /**\n         * A key-value collection of form UIDs and their <span> elements for displaying validation messages for an input (by DOM name).\n         */\n        this.messageFor = {};\n        /**\n         * A list of managed elements, each having a randomly assigned unique identifier (UID).\n         */\n        this.elementUIDs = [];\n        /**\n         * A key-value collection of UID to Element for quick lookup.\n         */\n        this.elementByUID = {};\n        /**\n         * A key-value collection of input UIDs for a <form> UID.\n         */\n        this.formInputs = {};\n        /**\n         * A key-value map for input UID to its validator factory.\n         */\n        this.validators = {};\n        /**\n         * A key-value map for form UID to its trigger element (submit event for <form>).\n         */\n        this.formEvents = {};\n        /**\n         * A key-value map for element UID to its trigger element (input event for <textarea> and <input>, change event for <select>).\n         */\n        this.inputEvents = {};\n        /**\n         * A key-value map of input UID to its validation error message.\n         */\n        this.summary = {};\n        /**\n         * In milliseconds, the rate of fire of the input validation.\n         */\n        this.debounce = 300;\n        /**\n         * Allow hidden fields validation\n         */\n        this.allowHiddenFields = false;\n        /**\n         * Fires off validation for elements within the provided form and then calls the callback\n         * @param form The form to validate.\n         * @param callback Receives true or false indicating validity after all validation is complete.\n         * @returns Promise that resolves to true or false indicating validity after all validation is complete.\n         */\n        this.validateForm = function (form, callback) { return __awaiter(_this, void 0, void 0, function () {\n            var formUID, formValidationEvent, _a;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        if (!(form instanceof HTMLFormElement)) {\n                            throw new Error('validateForm() can only be called on <form> elements');\n                        }\n                        formUID = this.getElementUID(form);\n                        formValidationEvent = this.formEvents[formUID];\n                        _a = !formValidationEvent;\n                        if (_a) return [3 /*break*/, 2];\n                        return [4 /*yield*/, formValidationEvent(undefined, callback)];\n                    case 1:\n                        _a = (_b.sent());\n                        _b.label = 2;\n                    case 2: return [2 /*return*/, _a];\n                }\n            });\n        }); };\n        /**\n         * Fires off validation for the provided element and then calls the callback\n         * @param field The element to validate.\n         * @param callback Receives true or false indicating validity after all validation is complete.\n         * @returns Promise that resolves to true or false indicating validity after all validation is complete\n         */\n        this.validateField = function (field, callback) { return __awaiter(_this, void 0, void 0, function () {\n            var fieldUID, fieldValidationEvent, _a;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        fieldUID = this.getElementUID(field);\n                        fieldValidationEvent = this.inputEvents[fieldUID];\n                        _a = !fieldValidationEvent;\n                        if (_a) return [3 /*break*/, 2];\n                        return [4 /*yield*/, fieldValidationEvent(undefined, callback)];\n                    case 1:\n                        _a = (_b.sent());\n                        _b.label = 2;\n                    case 2: return [2 /*return*/, _a];\n                }\n            });\n        }); };\n        /**\n         * Called before validating form submit events.\n         * Default calls `preventDefault()` and `stopImmediatePropagation()`.\n         * @param submitEvent The `SubmitEvent`.\n         */\n        this.preValidate = function (submitEvent) {\n            submitEvent.preventDefault();\n            submitEvent.stopImmediatePropagation();\n        };\n        /**\n         * Handler for validated form submit events.\n         * Default calls `submitValidForm(form, submitEvent)` on success\n         * and `focusFirstInvalid(form)` on failure.\n         * @param form The form that has been validated.\n         * @param success The validation result.\n         * @param submitEvent The `SubmitEvent`.\n         */\n        this.handleValidated = function (form, success, submitEvent) {\n            if (!(form instanceof HTMLFormElement)) {\n                throw new Error('handleValidated() can only be called on <form> elements');\n            }\n            if (success) {\n                if (submitEvent) {\n                    _this.submitValidForm(form, submitEvent);\n                }\n            }\n            else {\n                _this.focusFirstInvalid(form);\n            }\n        };\n        /**\n         * Dispatches a new `SubmitEvent` on the provided form,\n         * then calls `form.submit()` unless `submitEvent` is cancelable\n         * and `preventDefault()` was called by a handler that received the new event.\n         *\n         * This is equivalent to `form.requestSubmit()`, but more flexible.\n         * @param form The validated form to submit\n         * @param submitEvent The `SubmitEvent`.\n         */\n        this.submitValidForm = function (form, submitEvent) {\n            if (!(form instanceof HTMLFormElement)) {\n                throw new Error('submitValidForm() can only be called on <form> elements');\n            }\n            var newEvent = new SubmitEvent('submit', submitEvent);\n            if (form.dispatchEvent(newEvent)) {\n                // Because the submitter is not propagated when calling\n                // form.submit(), we recreate it here.\n                var submitter = submitEvent.submitter;\n                var submitterInput = null;\n                var initialFormAction = form.action;\n                if (submitter) {\n                    var name_1 = submitter.getAttribute('name');\n                    // If name is null, a submit button is not submitted.\n                    if (name_1) {\n                        submitterInput = document.createElement('input');\n                        submitterInput.type = 'hidden';\n                        submitterInput.name = name_1;\n                        submitterInput.value = submitter.getAttribute('value');\n                        form.appendChild(submitterInput);\n                    }\n                    var formAction = submitter.getAttribute('formaction');\n                    if (formAction) {\n                        form.action = formAction;\n                    }\n                }\n                try {\n                    form.submit();\n                }\n                finally {\n                    if (submitterInput) {\n                        // Important to clean up the submit input we created.\n                        form.removeChild(submitterInput);\n                    }\n                    form.action = initialFormAction;\n                }\n            }\n        };\n        /**\n         * Focuses the first invalid element within the provided form\n         * @param form\n         */\n        this.focusFirstInvalid = function (form) {\n            if (!(form instanceof HTMLFormElement)) {\n                throw new Error('focusFirstInvalid() can only be called on <form> elements');\n            }\n            var formUID = _this.getElementUID(form);\n            var formInputUIDs = _this.formInputs[formUID];\n            var invalidFormInputUID = formInputUIDs === null || formInputUIDs === void 0 ? void 0 : formInputUIDs.find(function (uid) { return _this.summary[uid]; });\n            if (invalidFormInputUID) {\n                var firstInvalid = _this.elementByUID[invalidFormInputUID];\n                if (firstInvalid instanceof HTMLElement) {\n                    firstInvalid.focus();\n                }\n            }\n        };\n        /**\n         * Returns true if the provided form is currently valid.\n         * The form will be validated unless prevalidate is set to false.\n         * @param form The form to validate.\n         * @param prevalidate Whether the form should be validated before returning.\n         * @param callback A callback that receives true or false indicating validity after all validation is complete. Ignored if prevalidate is false.\n         * @returns The current state of the form. May be inaccurate if any validation is asynchronous (e.g. remote); consider using `callback` instead.\n         */\n        this.isValid = function (form, prevalidate, callback) {\n            if (prevalidate === void 0) { prevalidate = true; }\n            if (!(form instanceof HTMLFormElement)) {\n                throw new Error('isValid() can only be called on <form> elements');\n            }\n            if (prevalidate) {\n                _this.validateForm(form, callback);\n            }\n            var formUID = _this.getElementUID(form);\n            var formInputUIDs = _this.formInputs[formUID];\n            var formIsInvalid = (formInputUIDs === null || formInputUIDs === void 0 ? void 0 : formInputUIDs.some(function (uid) { return _this.summary[uid]; })) === true;\n            return !formIsInvalid;\n        };\n        /**\n         * Returns true if the provided field is currently valid.\n         * The field will be validated unless prevalidate is set to false.\n         * @param field The field to validate.\n         * @param prevalidate Whether the field should be validated before returning.\n         * @param callback A callback that receives true or false indicating validity after all validation is complete. Ignored if prevalidate is false.\n         * @returns The current state of the field. May be inaccurate if any validation is asynchronous (e.g. remote); consider using `callback` instead.\n         */\n        this.isFieldValid = function (field, prevalidate, callback) {\n            if (prevalidate === void 0) { prevalidate = true; }\n            if (prevalidate) {\n                _this.validateField(field, callback);\n            }\n            var fieldUID = _this.getElementUID(field);\n            return _this.summary[fieldUID] === undefined;\n        };\n        /**\n         * Options for this instance of @type {ValidationService}.\n         */\n        this.options = {\n            root: document.body,\n            watch: false,\n            addNoValidate: true,\n        };\n        /**\n         * Override CSS class name for input validation error. Default: 'input-validation-error'\n         */\n        this.ValidationInputCssClassName = \"input-validation-error\";\n        /**\n         * Override CSS class name for valid input validation. Default: 'input-validation-valid'\n         */\n        this.ValidationInputValidCssClassName = \"input-validation-valid\";\n        /**\n         * Override CSS class name for field validation error. Default: 'field-validation-error'\n         */\n        this.ValidationMessageCssClassName = \"field-validation-error\";\n        /**\n         * Override CSS class name for valid field validation. Default: 'field-validation-valid'\n         */\n        this.ValidationMessageValidCssClassName = \"field-validation-valid\";\n        /**\n         * Override CSS class name for validation summary error. Default: 'validation-summary-errors'\n         */\n        this.ValidationSummaryCssClassName = \"validation-summary-errors\";\n        /**\n         * Override CSS class name for valid validation summary. Default: 'validation-summary-valid'\n         */\n        this.ValidationSummaryValidCssClassName = \"validation-summary-valid\";\n        this.logger = logger || nullLogger;\n    }\n    /**\n     * Registers a new validation plugin of the given name, if not registered yet.\n     * Registered plugin validates inputs with data-val-[name] attribute, used as error message.\n     * @param name\n     * @param callback\n     */\n    ValidationService.prototype.addProvider = function (name, callback) {\n        if (this.providers[name]) {\n            // First-Come-First-Serve validation plugin design.\n            // Allows developers to override the default MVC Providers by adding custom providers BEFORE bootstrap() is called!\n            return;\n        }\n        this.logger.log(\"Registered provider: %s\", name);\n        this.providers[name] = callback;\n    };\n    /**\n     * Registers the default providers for enabling ASP.NET Core MVC client-side validation.\n     */\n    ValidationService.prototype.addMvcProviders = function () {\n        var mvc = new MvcValidationProviders();\n        // [Required]\n        this.addProvider('required', mvc.required);\n        // [StringLength], [MinLength], [MaxLength]\n        this.addProvider('length', mvc.stringLength);\n        this.addProvider('maxlength', mvc.stringLength);\n        this.addProvider('minlength', mvc.stringLength);\n        // [Compare]\n        this.addProvider('equalto', mvc.compare);\n        // [Range]\n        this.addProvider('range', mvc.range);\n        // [RegularExpression]\n        this.addProvider('regex', mvc.regex);\n        // [CreditCard]\n        this.addProvider('creditcard', mvc.creditcard);\n        // [EmailAddress]\n        this.addProvider('email', mvc.email);\n        // [Url]\n        this.addProvider('url', mvc.url);\n        // [Phone]\n        this.addProvider('phone', mvc.phone);\n        // [Remote]\n        this.addProvider('remote', mvc.remote);\n    };\n    /**\n     * Scans `root` for all validation message <span> generated by ASP.NET Core MVC, then calls `cb` for each.\n     * @param root The root node to scan\n     * @param cb The callback to invoke with each form and span\n     */\n    ValidationService.prototype.scanMessages = function (root, cb) {\n        /* If a validation span explicitly declares a form, we group the span with that form. */\n        var validationMessageElements = Array.from(root.querySelectorAll('span[form]'));\n        for (var _i = 0, validationMessageElements_1 = validationMessageElements; _i < validationMessageElements_1.length; _i++) {\n            var span = validationMessageElements_1[_i];\n            var form = document.getElementById(span.getAttribute('form'));\n            if (form instanceof HTMLFormElement) {\n                cb.call(this, form, span);\n            }\n        }\n        // Otherwise if a validation message span is inside a form, we group the span with the form it's inside.\n        var forms = Array.from(root.querySelectorAll('form'));\n        if (root instanceof HTMLFormElement) {\n            // querySelectorAll does not include the root element itself.\n            // we could use 'matches', but that's newer than querySelectorAll so we'll keep it simple and compatible.\n            forms.push(root);\n        }\n        // If root is the descendant of a form, we want to include that form too.\n        var containingForm = (root instanceof Element) ? root.closest('form') : null;\n        if (containingForm) {\n            forms.push(containingForm);\n        }\n        for (var _a = 0, forms_1 = forms; _a < forms_1.length; _a++) {\n            var form = forms_1[_a];\n            var validationMessageElements_3 = Array.from(form.querySelectorAll('[data-valmsg-for]'));\n            for (var _b = 0, validationMessageElements_2 = validationMessageElements_3; _b < validationMessageElements_2.length; _b++) {\n                var span = validationMessageElements_2[_b];\n                cb.call(this, form, span);\n            }\n        }\n    };\n    ValidationService.prototype.pushValidationMessageSpan = function (form, span) {\n        var _a, _b;\n        var _c;\n        var formId = this.getElementUID(form);\n        var formSpans = (_a = (_c = this.messageFor)[formId]) !== null && _a !== void 0 ? _a : (_c[formId] = {});\n        var messageForId = span.getAttribute('data-valmsg-for');\n        if (!messageForId)\n            return;\n        var spans = (_b = formSpans[messageForId]) !== null && _b !== void 0 ? _b : (formSpans[messageForId] = []);\n        if (spans.indexOf(span) < 0) {\n            spans.push(span);\n        }\n        else {\n            this.logger.log(\"Validation element for '%s' is already tracked\", name, span);\n        }\n    };\n    ValidationService.prototype.removeValidationMessageSpan = function (form, span) {\n        var formId = this.getElementUID(form);\n        var formSpans = this.messageFor[formId];\n        if (!formSpans)\n            return;\n        var messageForId = span.getAttribute('data-valmsg-for');\n        if (!messageForId)\n            return;\n        var spans = formSpans[messageForId];\n        if (!spans) {\n            return;\n        }\n        var index = spans.indexOf(span);\n        if (index >= 0) {\n            spans.splice(index, 1);\n        }\n        else {\n            this.logger.log(\"Validation element for '%s' was already removed\", name, span);\n        }\n    };\n    /**\n     * Given attribute map for an HTML input, returns the validation directives to be executed.\n     * @param attributes\n     */\n    ValidationService.prototype.parseDirectives = function (attributes) {\n        var directives = {};\n        var validationAtributes = {};\n        var cut = 'data-val-'.length;\n        for (var i = 0; i < attributes.length; i++) {\n            var a = attributes[i];\n            if (a.name.indexOf('data-val-') === 0) {\n                var key = a.name.substr(cut);\n                validationAtributes[key] = a.value;\n            }\n        }\n        var _loop_1 = function (key) {\n            if (key.indexOf('-') === -1) {\n                var parameters = Object.keys(validationAtributes).filter(function (Q) {\n                    return (Q !== key) && (Q.indexOf(key) === 0);\n                });\n                var directive = {\n                    error: validationAtributes[key],\n                    params: {}\n                };\n                var pcut = (key + '-').length;\n                for (var i = 0; i < parameters.length; i++) {\n                    var pvalue = validationAtributes[parameters[i]];\n                    var pkey = parameters[i].substr(pcut);\n                    directive.params[pkey] = pvalue;\n                }\n                directives[key] = directive;\n            }\n        };\n        for (var key in validationAtributes) {\n            _loop_1(key);\n        }\n        return directives;\n    };\n    /**\n     *  Returns an RFC4122 version 4 compliant GUID.\n     */\n    ValidationService.prototype.guid4 = function () {\n        // (c) broofa, MIT Licensed\n        // https://stackoverflow.com/questions/105034/create-guid-uuid-in-javascript/2117523#2117523\n        return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n            var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);\n            return v.toString(16);\n        });\n    };\n    /**\n     * Gets a UID for an DOM element.\n     * @param node\n     */\n    ValidationService.prototype.getElementUID = function (node) {\n        var x = this.elementUIDs.filter(function (e) {\n            return e.node === node;\n        })[0];\n        if (x) {\n            return x.uid;\n        }\n        var uid = this.guid4();\n        this.elementUIDs.push({\n            node: node,\n            uid: uid\n        });\n        this.elementByUID[uid] = node;\n        return uid;\n    };\n    /**\n     * Returns a Promise that returns validation result for each and every inputs within the form.\n     * @param formUID\n     */\n    ValidationService.prototype.getFormValidationTask = function (formUID) {\n        var formInputUIDs = this.formInputs[formUID];\n        if (!formInputUIDs || formInputUIDs.length === 0) {\n            return Promise.resolve(true);\n        }\n        var formValidators = [];\n        for (var _i = 0, formInputUIDs_1 = formInputUIDs; _i < formInputUIDs_1.length; _i++) {\n            var inputUID = formInputUIDs_1[_i];\n            var validator = this.validators[inputUID];\n            if (validator) {\n                formValidators.push(validator);\n            }\n        }\n        var tasks = formValidators.map(function (factory) { return factory(); });\n        return Promise.all(tasks).then(function (result) { return result.every(function (e) { return e; }); });\n    };\n    // Retrieves the validation span for the input.\n    ValidationService.prototype.getMessageFor = function (input) {\n        var _a;\n        if (!input.form) {\n            return undefined;\n        }\n        var formId = this.getElementUID(input.form);\n        return (_a = this.messageFor[formId]) === null || _a === void 0 ? void 0 : _a[input.name];\n    };\n    /**\n     * Returns true if the event triggering the form submission indicates we should validate the form.\n     * @param e\n     */\n    ValidationService.prototype.shouldValidate = function (e) {\n        // Skip client-side validation if the form has been submitted via a button that has the \"formnovalidate\" attribute.\n        return !(e && e['submitter'] && e['submitter']['formNoValidate']);\n    };\n    /**\n     * Tracks a <form> element as parent of an input UID. When the form is submitted, attempts to validate the said input asynchronously.\n     * @param form\n     * @param inputUID\n     */\n    ValidationService.prototype.trackFormInput = function (form, inputUID) {\n        var _this = this;\n        var _a;\n        var _b;\n        var formUID = this.getElementUID(form);\n        var formInputUIDs = (_a = (_b = this.formInputs)[formUID]) !== null && _a !== void 0 ? _a : (_b[formUID] = []);\n        var add = formInputUIDs.indexOf(inputUID) === -1;\n        if (add) {\n            formInputUIDs.push(inputUID);\n            if (this.options.addNoValidate) {\n                this.logger.log('Setting novalidate on form', form);\n                form.setAttribute('novalidate', 'novalidate');\n            }\n            else {\n                this.logger.log('Not setting novalidate on form', form);\n            }\n        }\n        else {\n            this.logger.log(\"Form input for UID '%s' is already tracked\", inputUID);\n        }\n        if (this.formEvents[formUID]) {\n            return;\n        }\n        var validationTask = null;\n        var cb = function (e, callback) {\n            // Prevent recursion\n            if (validationTask) {\n                return validationTask;\n            }\n            if (!_this.shouldValidate(e)) {\n                return Promise.resolve(true);\n            }\n            validationTask = _this.getFormValidationTask(formUID);\n            //`preValidate` typically prevents submit before validation\n            if (e) {\n                _this.preValidate(e);\n            }\n            _this.logger.log('Validating', form);\n            return validationTask.then(function (success) { return __awaiter(_this, void 0, void 0, function () {\n                var validationEvent;\n                return __generator(this, function (_a) {\n                    switch (_a.label) {\n                        case 0:\n                            this.logger.log('Validated (success = %s)', success, form);\n                            if (callback) {\n                                callback(success);\n                                return [2 /*return*/, success];\n                            }\n                            validationEvent = new CustomEvent('validation', {\n                                detail: { valid: success }\n                            });\n                            form.dispatchEvent(validationEvent);\n                            // Firefox fix: redispatch 'submit' after finished handling this event\n                            return [4 /*yield*/, new Promise(function (resolve) { return setTimeout(resolve, 0); })];\n                        case 1:\n                            // Firefox fix: redispatch 'submit' after finished handling this event\n                            _a.sent();\n                            this.handleValidated(form, success, e);\n                            return [2 /*return*/, success];\n                    }\n                });\n            }); }).catch(function (error) {\n                _this.logger.log('Validation error', error);\n                return false;\n            }).finally(function () {\n                validationTask = null;\n            });\n        };\n        form.addEventListener('submit', cb);\n        var cbReset = function (e) {\n            var formInputUIDs = _this.formInputs[formUID];\n            for (var _i = 0, formInputUIDs_2 = formInputUIDs; _i < formInputUIDs_2.length; _i++) {\n                var inputUID_1 = formInputUIDs_2[_i];\n                _this.resetField(inputUID_1);\n            }\n            _this.renderSummary();\n        };\n        form.addEventListener('reset', cbReset);\n        cb.remove = function () {\n            form.removeEventListener('submit', cb);\n            form.removeEventListener('reset', cbReset);\n        };\n        this.formEvents[formUID] = cb;\n    };\n    /*\n        Reset the state of a validatable input. This is used when it's enabled or disabled.\n    */\n    ValidationService.prototype.reset = function (input) {\n        if (this.isDisabled(input)) {\n            this.resetField(this.getElementUID(input));\n        }\n        else {\n            this.scan(input);\n        }\n    };\n    ValidationService.prototype.resetField = function (inputUID) {\n        var input = this.elementByUID[inputUID];\n        this.swapClasses(input, '', this.ValidationInputCssClassName);\n        this.swapClasses(input, '', this.ValidationInputValidCssClassName);\n        var spans = isValidatable(input) && this.getMessageFor(input);\n        if (spans) {\n            for (var i = 0; i < spans.length; i++) {\n                spans[i].innerHTML = '';\n                this.swapClasses(spans[i], '', this.ValidationMessageCssClassName);\n                this.swapClasses(spans[i], '', this.ValidationMessageValidCssClassName);\n            }\n        }\n        delete this.summary[inputUID];\n    };\n    ValidationService.prototype.untrackFormInput = function (form, inputUID) {\n        var _a;\n        var formUID = this.getElementUID(form);\n        var formInputUIDs = this.formInputs[formUID];\n        if (!formInputUIDs) {\n            return;\n        }\n        var indexToRemove = formInputUIDs.indexOf(inputUID);\n        if (indexToRemove >= 0) {\n            formInputUIDs.splice(indexToRemove, 1);\n            if (!formInputUIDs.length) {\n                (_a = this.formEvents[formUID]) === null || _a === void 0 ? void 0 : _a.remove();\n                delete this.formEvents[formUID];\n                delete this.formInputs[formUID];\n                delete this.messageFor[formUID];\n            }\n        }\n        else {\n            this.logger.log(\"Form input for UID '%s' was already removed\", inputUID);\n        }\n    };\n    /**\n     * Adds an input element to be managed and validated by the service.\n     * Triggers a debounced live validation when input value changes.\n     * @param input\n     */\n    ValidationService.prototype.addInput = function (input) {\n        var _this = this;\n        var _a;\n        var uid = this.getElementUID(input);\n        var directives = this.parseDirectives(input.attributes);\n        this.validators[uid] = this.createValidator(input, directives);\n        if (input.form) {\n            this.trackFormInput(input.form, uid);\n        }\n        if (this.inputEvents[uid]) {\n            return;\n        }\n        var cb = function (event, callback) { return __awaiter(_this, void 0, void 0, function () {\n            var validate, success, error_1;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        validate = this.validators[uid];\n                        if (!validate)\n                            return [2 /*return*/, true];\n                        if (!input.dataset.valEvent &&\n                            event && event.type === 'input' &&\n                            !input.classList.contains(this.ValidationInputCssClassName)) {\n                            // When no data-val-event specified on a field, \"input\" event only takes it back to valid. \"Change\" event can make it invalid.\n                            return [2 /*return*/, true];\n                        }\n                        this.logger.log('Validating', { event: event });\n                        _a.label = 1;\n                    case 1:\n                        _a.trys.push([1, 3, , 4]);\n                        return [4 /*yield*/, validate()];\n                    case 2:\n                        success = _a.sent();\n                        callback(success);\n                        return [2 /*return*/, success];\n                    case 3:\n                        error_1 = _a.sent();\n                        this.logger.log('Validation error', error_1);\n                        return [2 /*return*/, false];\n                    case 4: return [2 /*return*/];\n                }\n            });\n        }); };\n        var debounceTimeoutID = null;\n        cb.debounced = function (event, callback) {\n            if (debounceTimeoutID !== null) {\n                clearTimeout(debounceTimeoutID);\n            }\n            debounceTimeoutID = setTimeout(function () {\n                cb(event, callback);\n            }, _this.debounce);\n        };\n        var defaultEvent = input instanceof HTMLSelectElement ? 'change' : 'input change';\n        var validateEvent = (_a = input.dataset.valEvent) !== null && _a !== void 0 ? _a : defaultEvent;\n        var events = validateEvent.split(' ');\n        events.forEach(function (eventName) {\n            input.addEventListener(eventName, cb.debounced);\n        });\n        cb.remove = function () {\n            events.forEach(function (eventName) {\n                input.removeEventListener(eventName, cb.debounced);\n            });\n        };\n        this.inputEvents[uid] = cb;\n    };\n    ValidationService.prototype.removeInput = function (input) {\n        var uid = this.getElementUID(input);\n        // Clean up event listener\n        var cb = this.inputEvents[uid];\n        if (cb === null || cb === void 0 ? void 0 : cb.remove) {\n            cb.remove();\n            delete cb.remove;\n        }\n        delete this.summary[uid];\n        delete this.inputEvents[uid];\n        delete this.validators[uid];\n        if (input.form) {\n            this.untrackFormInput(input.form, uid);\n        }\n    };\n    /**\n     * Scans `root` for input elements to be validated, then calls `cb` for each.\n     * @param root The root node to scan\n     * @param cb The callback to invoke with each input\n     */\n    ValidationService.prototype.scanInputs = function (root, cb) {\n        var inputs = Array.from(root.querySelectorAll(validatableSelector('[data-val=\"true\"]')));\n        // querySelectorAll does not include the root element itself.\n        // we could use 'matches', but that's newer than querySelectorAll so we'll keep it simple and compatible.\n        if (isValidatable(root) && root.getAttribute(\"data-val\") === \"true\") {\n            inputs.push(root);\n        }\n        for (var i = 0; i < inputs.length; i++) {\n            var input = inputs[i];\n            cb.call(this, input);\n        }\n    };\n    /**\n     * Returns a <ul> element as a validation errors summary.\n     */\n    ValidationService.prototype.createSummaryDOM = function () {\n        if (!Object.keys(this.summary).length) {\n            return null;\n        }\n        var renderedMessages = [];\n        var ul = document.createElement('ul');\n        for (var key in this.summary) {\n            // It could be that the message we are rendering belongs to one of a fieldset of multiple inputs that's not selected,\n            // even if another one in the fieldset is. In that case the fieldset is valid, and we shouldn't render the message.\n            var matchingElement = this.elementByUID[key];\n            if (matchingElement instanceof HTMLInputElement) {\n                if (matchingElement.type === \"checkbox\" || matchingElement.type === \"radio\") {\n                    if (matchingElement.className === this.ValidationInputValidCssClassName) {\n                        continue;\n                    }\n                }\n            }\n            // With required multiple inputs, such as a checkbox list, we'll have one message per input.\n            // It's one from the inputs that's required, not all, so we should only have one message displayed.\n            if (renderedMessages.indexOf(this.summary[key]) > -1) {\n                continue;\n            }\n            var li = document.createElement('li');\n            li.innerHTML = this.summary[key];\n            ul.appendChild(li);\n            renderedMessages.push(this.summary[key]);\n        }\n        return ul;\n    };\n    /**\n     * Displays validation summary to ASP.NET Core MVC designated elements, when it actually gets updated.\n     */\n    ValidationService.prototype.renderSummary = function () {\n        var summaryElements = document.querySelectorAll('[data-valmsg-summary=\"true\"]');\n        if (!summaryElements.length) {\n            return;\n        }\n        // Prevents wasteful re-rendering of summary list element with identical items!\n        // Using JSON.stringify for quick and painless deep compare of simple KVP. You need to sort the keys first, tho...\n        var shadow = JSON.stringify(this.summary, Object.keys(this.summary).sort());\n        if (shadow === this.renderedSummaryJSON) {\n            return;\n        }\n        // Prevents wasteful re-rendering of summary list element with identical items!\n        this.renderedSummaryJSON = shadow;\n        var ul = this.createSummaryDOM();\n        for (var i = 0; i < summaryElements.length; i++) {\n            var e = summaryElements[i];\n            // Remove existing list elements, but keep the summary's message.\n            var listElements = e.querySelectorAll(\"ul\");\n            for (var j = 0; j < listElements.length; j++) {\n                listElements[j].remove();\n            }\n            // Style the summary element as valid/invalid depending on whether there are any messages to display.\n            if (ul && ul.hasChildNodes()) {\n                this.swapClasses(e, this.ValidationSummaryCssClassName, this.ValidationSummaryValidCssClassName);\n                e.appendChild(ul.cloneNode(true));\n            }\n            else {\n                this.swapClasses(e, this.ValidationSummaryValidCssClassName, this.ValidationSummaryCssClassName);\n            }\n        }\n    };\n    /**\n     * Adds an error message to an input element, which also updates the validation message elements and validation summary elements.\n     * @param input\n     * @param message\n     */\n    ValidationService.prototype.addError = function (input, message) {\n        var spans = this.getMessageFor(input);\n        if (spans) {\n            for (var i = 0; i < spans.length; i++) {\n                var span = spans[i];\n                spans[i].innerHTML = message;\n                this.swapClasses(spans[i], this.ValidationMessageCssClassName, this.ValidationMessageValidCssClassName);\n            }\n        }\n        this.highlight(input, this.ValidationInputCssClassName, this.ValidationInputValidCssClassName);\n        if (input.form) {\n            // Adding an error to one input should also add it to others with the same name (i.e. for radio button and checkbox lists).\n            var inputs = input.form.querySelectorAll(validatableSelector(\"[name=\\\"\".concat(input.name, \"\\\"]\")));\n            for (var i = 0; i < inputs.length; i++) {\n                this.swapClasses(inputs[i], this.ValidationInputCssClassName, this.ValidationInputValidCssClassName);\n                var uid = this.getElementUID(inputs[i]);\n                this.summary[uid] = message;\n            }\n        }\n        this.renderSummary();\n    };\n    /**\n     * Removes an error message from an input element, which also updates the validation message elements and validation summary elements.\n     * @param input\n     */\n    ValidationService.prototype.removeError = function (input) {\n        var spans = this.getMessageFor(input);\n        if (spans) {\n            for (var i = 0; i < spans.length; i++) {\n                spans[i].innerHTML = '';\n                this.swapClasses(spans[i], this.ValidationMessageValidCssClassName, this.ValidationMessageCssClassName);\n            }\n        }\n        this.unhighlight(input, this.ValidationInputCssClassName, this.ValidationInputValidCssClassName);\n        // Removing an error from one input should also remove it from others with the same name (i.e. for radio button and checkbox lists).\n        if (input.form) {\n            var inputs = input.form.querySelectorAll(validatableSelector(\"[name=\\\"\".concat(input.name, \"\\\"]\")));\n            for (var i = 0; i < inputs.length; i++) {\n                this.swapClasses(inputs[i], this.ValidationInputValidCssClassName, this.ValidationInputCssClassName);\n                var uid = this.getElementUID(inputs[i]);\n                delete this.summary[uid];\n            }\n        }\n        this.renderSummary();\n    };\n    /**\n     * Returns a validation Promise factory for an input element, using given validation directives.\n     * @param input\n     * @param directives\n     */\n    ValidationService.prototype.createValidator = function (input, directives) {\n        var _this = this;\n        return function () { return __awaiter(_this, void 0, void 0, function () {\n            var _a, _b, _c, _i, key, directive, provider, result, valid, error, resolution;\n            return __generator(this, function (_d) {\n                switch (_d.label) {\n                    case 0:\n                        if (!(!this.isHidden(input) && !this.isDisabled(input))) return [3 /*break*/, 7];\n                        _a = directives;\n                        _b = [];\n                        for (_c in _a)\n                            _b.push(_c);\n                        _i = 0;\n                        _d.label = 1;\n                    case 1:\n                        if (!(_i < _b.length)) return [3 /*break*/, 7];\n                        _c = _b[_i];\n                        if (!(_c in _a)) return [3 /*break*/, 6];\n                        key = _c;\n                        directive = directives[key];\n                        provider = this.providers[key];\n                        if (!provider) {\n                            this.logger.log('aspnet-validation provider not implemented: %s', key);\n                            return [3 /*break*/, 6];\n                        }\n                        this.logger.log(\"Running %s validator on element\", key, input);\n                        result = provider(input.value, input, directive.params);\n                        valid = false;\n                        error = directive.error;\n                        if (!(typeof result === 'boolean')) return [3 /*break*/, 2];\n                        valid = result;\n                        return [3 /*break*/, 5];\n                    case 2:\n                        if (!(typeof result === 'string')) return [3 /*break*/, 3];\n                        valid = false;\n                        error = result;\n                        return [3 /*break*/, 5];\n                    case 3: return [4 /*yield*/, result];\n                    case 4:\n                        resolution = _d.sent();\n                        if (typeof resolution === 'boolean') {\n                            valid = resolution;\n                        }\n                        else {\n                            valid = false;\n                            error = resolution;\n                        }\n                        _d.label = 5;\n                    case 5:\n                        if (!valid) {\n                            this.addError(input, error);\n                            return [2 /*return*/, false];\n                        }\n                        _d.label = 6;\n                    case 6:\n                        _i++;\n                        return [3 /*break*/, 1];\n                    case 7:\n                        this.removeError(input);\n                        return [2 /*return*/, true];\n                }\n            });\n        }); };\n    };\n    /**\n     * Checks if the provided input is hidden from the browser\n     * @param input\n     * @returns\n     */\n    ValidationService.prototype.isHidden = function (input) {\n        return !(this.allowHiddenFields || input.offsetWidth || input.offsetHeight || input.getClientRects().length);\n    };\n    /**\n     * Checks if the provided input is disabled\n     * @param input\n     * @returns\n     */\n    ValidationService.prototype.isDisabled = function (input) {\n        // If the input is validatable, we check the `disabled` property.\n        // Otherwise the `disabled` property is undefined and this returns false.\n        return input.disabled;\n    };\n    /**\n     * Adds addClass and removes removeClass\n     * @param element Element to modify\n     * @param addClass Class to add\n     * @param removeClass Class to remove\n     */\n    ValidationService.prototype.swapClasses = function (element, addClass, removeClass) {\n        if (addClass && !this.isDisabled(element) && !element.classList.contains(addClass)) {\n            element.classList.add(addClass);\n        }\n        if (element.classList.contains(removeClass)) {\n            element.classList.remove(removeClass);\n        }\n    };\n    /**\n     * Load default validation providers and scans the entire document when ready.\n     * @param options.watch If set to true, a MutationObserver will be used to continuously watch for new elements that provide validation directives.\n     * @param options.addNoValidate If set to true (the default), a novalidate attribute will be added to the containing form in validate elements.\n     */\n    ValidationService.prototype.bootstrap = function (options) {\n        var _this = this;\n        Object.assign(this.options, options);\n        this.addMvcProviders();\n        var document = window.document;\n        var root = this.options.root;\n        var init = function () {\n            _this.scan(root);\n            // Watch for further mutations after initial scan\n            if (_this.options.watch) {\n                _this.watch(root);\n            }\n        };\n        // If the document is done loading, scan it now.\n        if (document.readyState === 'complete' || document.readyState === 'interactive') {\n            init();\n        }\n        else {\n            // Otherwise wait until the document is done loading.\n            document.addEventListener('DOMContentLoaded', init);\n        }\n    };\n    /**\n     * Scans the root element for any validation directives and attaches behavior to them.\n     * @param root The root node to scan; if not provided, `options.root` (default: `document.body`) will be scanned\n     */\n    ValidationService.prototype.scan = function (root) {\n        root !== null && root !== void 0 ? root : (root = this.options.root);\n        this.logger.log('Scanning', root);\n        this.scanMessages(root, this.pushValidationMessageSpan);\n        this.scanInputs(root, this.addInput);\n    };\n    /**\n     * Scans the root element for any validation directives and removes behavior from them.\n     * @param root The root node to scan; if not provided, `options.root` (default: `document.body`) will be scanned\n     */\n    ValidationService.prototype.remove = function (root) {\n        root !== null && root !== void 0 ? root : (root = this.options.root);\n        this.logger.log('Removing', root);\n        this.scanMessages(root, this.removeValidationMessageSpan);\n        this.scanInputs(root, this.removeInput);\n    };\n    /**\n     * Watches the provided root element for mutations, and scans for new validation directives to attach behavior.\n     * @param root The root node to watch; if not provided, `options.root` (default: `document.body`) will be watched\n     */\n    ValidationService.prototype.watch = function (root) {\n        var _this = this;\n        root !== null && root !== void 0 ? root : (root = this.options.root);\n        this.observer = new MutationObserver(function (mutations) {\n            mutations.forEach(function (mutation) {\n                _this.observed(mutation);\n            });\n        });\n        this.observer.observe(root, {\n            attributes: true,\n            childList: true,\n            subtree: true\n        });\n        this.logger.log(\"Watching for mutations\");\n    };\n    ValidationService.prototype.observed = function (mutation) {\n        var _a, _b, _c;\n        if (mutation.type === 'childList') {\n            for (var i = 0; i < mutation.addedNodes.length; i++) {\n                var node = mutation.addedNodes[i];\n                this.logger.log('Added node', node);\n                if (node instanceof HTMLElement) {\n                    this.scan(node);\n                }\n            }\n            for (var i = 0; i < mutation.removedNodes.length; i++) {\n                var node = mutation.removedNodes[i];\n                this.logger.log('Removed node', node);\n                if (node instanceof HTMLElement) {\n                    this.remove(node);\n                }\n            }\n        }\n        else if (mutation.type === 'attributes') {\n            if (mutation.target instanceof HTMLElement) {\n                var attributeName = mutation.attributeName;\n                // Special case for disabled.\n                if (attributeName === 'disabled') {\n                    var target = mutation.target;\n                    this.reset(target);\n                }\n                else {\n                    var oldValue = (_a = mutation.oldValue) !== null && _a !== void 0 ? _a : '';\n                    var newValue = (_c = (_b = mutation.target.attributes[mutation.attributeName]) === null || _b === void 0 ? void 0 : _b.value) !== null && _c !== void 0 ? _c : '';\n                    this.logger.log(\"Attribute '%s' changed from '%s' to '%s'\", mutation.attributeName, oldValue, newValue, mutation.target);\n                    if (oldValue !== newValue) {\n                        this.scan(mutation.target);\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * Highlights invalid element by adding errorClass CSS class and removing validClass CSS class\n     * @param input Element to modify\n     * @param errorClass Class to add\n     * @param validClass Class to remove\n     */\n    ValidationService.prototype.highlight = function (input, errorClass, validClass) {\n        this.swapClasses(input, errorClass, validClass);\n    };\n    /**\n     * Unhighlight valid element by removing errorClass CSS class and adding validClass CSS class\n     * @param input Element to modify\n     * @param errorClass Class to remove\n     * @param validClass Class to add\n     */\n    ValidationService.prototype.unhighlight = function (input, errorClass, validClass) {\n        this.swapClasses(input, validClass, errorClass);\n    };\n    return ValidationService;\n}());\n\n\n/******/ \treturn __webpack_exports__;\n/******/ })()\n;\n});","if (!document.body.attributes.__htmx_antiforgery) {\r\n    document.addEventListener(\"htmx:configRequest\", evt => {\r\n        // Safely destructure detail properties with optional chaining\r\n        const { verb, parameters, headers } = evt.detail;\r\n        if (verb?.toUpperCase() === 'GET') return;\r\n\r\n        const antiforgery = htmx.config?.antiforgery;\r\n        if (!antiforgery) return;\r\n\r\n        const { headerName, requestToken, formFieldName } = antiforgery;\r\n\r\n        // Ensure at least one configuration field is provided\r\n        if (!headerName && !formFieldName) {\r\n            console.warn(\"Antiforgery configuration is missing both headerName and formFieldName. Token not added.\");\r\n            return;\r\n        }\r\n\r\n        // If formFieldName exists and token is already set, avoid overriding it\r\n        if (formFieldName && parameters[formFieldName]) return;\r\n\r\n        // Apply the token either to headers or parameters based on configuration\r\n        if (headerName) {\r\n            headers[headerName] = requestToken;\r\n        } else {\r\n            parameters[formFieldName] = requestToken;\r\n        }\r\n    });\r\n    document.addEventListener(\"htmx:afterOnLoad\", evt => {\r\n        if (evt.detail.boosted) {\r\n            const responseText = evt.detail.xhr.responseText;\r\n            const selector = 'meta[name=htmx-config]';\r\n\r\n            // Find the index of the opening and closing tag for the meta element.\r\n            const startIndex = responseText.indexOf(`<meta name=\"htmx-config\"`);\r\n            const endIndex = responseText.indexOf(\">\", startIndex) + 1; // Include the closing >\r\n            const closingTagIndex = responseText.indexOf(\"</meta>\", endIndex);  //handle self closing tags\r\n\r\n            if (startIndex > -1) {\r\n                let metaTagString = \"\";\r\n                if(closingTagIndex > -1){\r\n                    const closingSlashIndex = responseText.indexOf(\"/\", startIndex);\r\n                    if (closingSlashIndex > -1 && closingSlashIndex < endIndex) {\r\n                        // Handle Self closing tag e.g. <meta ... />\r\n                        metaTagString = responseText.substring(startIndex, endIndex);\r\n                    } else {\r\n                        metaTagString = responseText.substring(startIndex, responseText.indexOf(\"</meta>\") + 7);\r\n                    }\r\n                } else {\r\n                    metaTagString = responseText.substring(startIndex, endIndex);\r\n                }\r\n\r\n                // Extract the content attribute.\r\n                const contentAttributeRegex = /content=\"([^\"]*)\"/;\r\n                const contentMatch = metaTagString.match(contentAttributeRegex);\r\n\r\n                if (contentMatch && contentMatch[1]) {\r\n                    const contentValue = contentMatch[1];\r\n\r\n                    const current = document.querySelector(selector);\r\n\r\n                    // only change the anti-forgery token\r\n                    const key = 'antiforgery';\r\n                    try {\r\n                        htmx.config[key] = JSON.parse(contentValue)[key];\r\n                    } catch (e) {\r\n                        console.error(\"Error parsing htmx-config JSON:\", e);\r\n                        return; // Exit if parsing fails\r\n                    }\r\n\r\n\r\n                    // Create the new meta element and set its attributes.\r\n                    const newMeta = document.createElement('meta');\r\n                    newMeta.setAttribute('name', 'htmx-config');\r\n                    newMeta.setAttribute('content', contentValue);\r\n\r\n                    // update DOM\r\n                    current.replaceWith(newMeta);\r\n\r\n                }\r\n            }\r\n        }\r\n    });\r\n    document.body.attributes.__htmx_antiforgery = true;\r\n}","import \"./rizzy-nonce\"\r\nimport \"./rizzy-streaming\"\r\nimport { ValidationService } from \"aspnet-client-validation\";\r\nimport \"./antiforgerySnippet\";\r\n\r\n// Set up ASP.NET validation\r\nlet validation = new ValidationService();\r\nvalidation.bootstrap({ watch: true });\r\n\r\nconst Rizzy = {\r\n    validation\r\n};\r\n\r\nwindow.Rizzy = { ...(window.Rizzy || {}), ...Rizzy };\r\n\r\nexport default Rizzy;"],"names":["name","elt","module","exports","MvcValidationProviders","fieldName","ValidationService","key","i","_a","formInputUIDs","document"],"mappings":"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","x_google_ignoreList":[2]}