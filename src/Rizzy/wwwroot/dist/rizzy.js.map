{"version":3,"file":"rizzy.js","mappings":"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","sources":["webpack:///./wwwroot/js/antiforgerySnippet.min.js","webpack:///./wwwroot/js/rizzy-nonce.js","webpack:///./wwwroot/js/rizzy-streaming.js","webpack:///./wwwroot/js/vendor/aspnet-validation/aspnet-validation.js","webpack:///webpack/bootstrap","webpack:///webpack/runtime/compat get default export","webpack:///webpack/runtime/define property getters","webpack:///webpack/runtime/hasOwnProperty shorthand","webpack:///webpack/runtime/make namespace object","webpack:///webpack/runtime/node module decorator","webpack:///./wwwroot/js/rizzy.js"],"sourcesContent":["document.body.attributes.__htmx_antiforgery||(document.addEventListener(\"htmx:configRequest\",e=>{let{verb:t,parameters:r,headers:n}=e.detail;if(\"GET\"===t?.toUpperCase())return;let i=htmx.config?.antiforgery;if(!i)return;let{headerName:a,requestToken:o,formFieldName:f}=i;if(!a&&!f){console.warn(\"Antiforgery configuration is missing both headerName and formFieldName. Token not added.\");return}f&&r[f]||(a?n[a]=o:r[f]=o)}),document.addEventListener(\"htmx:afterOnLoad\",e=>{if(e.detail.boosted){let t=e.detail.xhr.responseText,r=t.indexOf('<meta name=\"htmx-config\"'),n=t.indexOf(\">\",r)+1,i=t.indexOf(\"</meta>\",n);if(r>-1){let a=\"\";if(i>-1){let o=t.indexOf(\"/\",r);a=o>-1&&o<n?t.substring(r,n):t.substring(r,t.indexOf(\"</meta>\")+7)}else a=t.substring(r,n);let f=/content=\"([^\"]*)\"/,s=a.match(f);if(s&&s[1]){let d=s[1],m=document.querySelector(\"meta[name=htmx-config]\"),g=\"antiforgery\";try{htmx.config[g]=JSON.parse(d)[g]}catch(l){console.error(\"Error parsing htmx-config JSON:\",l);return}let c=document.createElement(\"meta\");c.setAttribute(\"name\",\"htmx-config\"),c.setAttribute(\"content\",d),m.replaceWith(c)}}}}),document.body.attributes.__htmx_antiforgery=!0);","//import htmx from 'htmx.org';\r\n\r\n(function() {\r\n    \r\n    htmx.defineExtension('rizzy-nonce',\r\n        {\r\n            transformResponse: function(text, xhr, elt) {\r\n\r\n                let documentNonce = htmx.config.documentNonce ?? htmx.config.inlineScriptNonce;\r\n\r\n                if (!documentNonce) {\r\n                    console.warn(\"rizzy-nonce extension loaded but no no nonce found for document. Inline scripts may be blocked.\");\r\n                    documentNonce = \"\";\r\n                }\r\n\r\n                // disable ajax fetching on history miss because it doesn't handle nonce replacment\r\n                htmx.config.refreshOnHistoryMiss = true; \r\n\r\n                // CSP nonce determination based on safe-nonce by Michael West\r\n                let nonce = xhr?.getResponseHeader('HX-Nonce');\r\n                if (!nonce) {\r\n                    const csp = xhr?.getResponseHeader('content-security-policy');\r\n                    if (csp) {\r\n                        const cspMatch = csp.match(/(style|script)-src[^;]*'nonce-([^']*)'/i);\r\n                        if (cspMatch) {\r\n                            nonce = cspMatch[2];\r\n                        }\r\n                    }\r\n                }\r\n                if (xhr && window.location.hostname) {\r\n                    const responseURL = new URL(xhr.responseURL);\r\n                    if (responseURL.hostname !== window.location.hostname) {\r\n                        nonce = ''; // ignore nonce header if request is not some domain \r\n                    }\r\n                }\r\n\r\n                nonce ??= '';\r\n\r\n                return this.processUnsafeHtml(text, documentNonce, nonce);\r\n            },\r\n            processUnsafeHtml: function(text, documentNonce, newScriptNonce) {\r\n                //const noncePattern = new RegExp(`(['\"])${newScriptNonce}\\\\1`, 'gi');\r\n\r\n                // Replace any occurrences of the nonce provided by the server with\r\n                // the existing document nonce. Note that at minimum the server text originates\r\n                // from is same-origin and the newScriptNonce that is replaced is determined\r\n                // from response headers which are only available when processing the xmlHttpRequest\r\n                if (documentNonce && newScriptNonce)\r\n                    text = text.replaceAll(newScriptNonce, documentNonce);\r\n\r\n                const parser = new DOMParser();\r\n\r\n                try {\r\n                    // At this point any remaining elements that don't have the correct\r\n                    // nonce will cause console errors to be emitted. We are going to strip\r\n                    // out those elements and any attempts to block rizzy-nonce in the included markup.\r\n                    let doc = parser.parseFromString(text, \"text/html\");\r\n\r\n                    if (doc) {\r\n                        // Remove any attempts to disable rizzy-nonce extension\r\n                        Array.from(doc.querySelectorAll('[hx-ext*=\"ignore:rizzy-nonce\"], [data-hx-ext*=\"ignore:rizzy-nonce\"]'))\r\n                            .forEach((elt) => {\r\n                                elt.remove();\r\n                            });\r\n\r\n                        // Select all <script> and <style> tags\r\n                        const elements = doc.querySelectorAll(\"script, style, link\");\r\n\r\n                        // Iterate through each element\r\n                        elements.forEach(elt => {\r\n                            const nonce = elt.getAttribute(\"nonce\");\r\n                            if (nonce !== documentNonce) {\r\n                                // Remove the element if the nonce doesn't match (or is missing)\r\n                                elt.remove();\r\n                            }\r\n                        });\r\n\r\n                        // Serialize the document back into an HTML string and return it\r\n                        return doc.documentElement.outerHTML;\r\n                    }\r\n\r\n                } catch (_) { }\r\n                {\r\n\r\n                }\r\n\r\n                return '';\r\n\r\n            }\r\n        });\r\n\r\n})()","/*\r\n * Blazor Stream Rendering HTMX Extension\r\n * Author: Michael Tanczos\r\n * Credits to SSE extension and Microsoft aspnetcore\r\n * at https://github.com/dotnet/aspnetcore/blob/main/src/Components/Web.JS/src/Rendering/StreamingRendering.ts\r\n */\r\n//import htmx from 'htmx.org';\r\n\r\n(function () {\r\n\r\n    var api;\r\n    var enableDomPreservation = true;\r\n    var componentLoaded = false;\r\n\r\n    class blazorStreamingUpdate extends HTMLElement {\r\n        connectedCallback() {\r\n            const blazorSsrElement = this.parentNode;\r\n\r\n            // Synchronously remove this from the DOM to minimize our chance of affecting anything else\r\n            blazorSsrElement.parentNode?.removeChild(blazorSsrElement);\r\n\r\n            // When this element receives content, if it's <template blazor-component-id=\"...\">...</template>,\r\n            // insert the template content into the DOM\r\n            blazorSsrElement.childNodes.forEach(node => {\r\n                if (node instanceof HTMLTemplateElement) {\r\n                    const componentId = node.getAttribute(\"blazor-component-id\");\r\n                    if (componentId) {\r\n                        insertStreamingContentIntoDocument(componentId, node.content);\r\n                    }\r\n                }\r\n            });\r\n\r\n            htmx?.process(document.body);\r\n        }\r\n    }\r\n\r\n    htmx.defineExtension(\"rizzy-streaming\",\r\n        {\r\n            /**\r\n             * Init saves the provided reference to the internal HTMX API.\r\n             *\r\n             * @param {import(\"../htmx\").HtmxInternalApi} api\r\n             * @returns void\r\n             */\r\n            init: function (apiRef) {\r\n                // store a reference to the internal API.\r\n                api = apiRef;\r\n\r\n                // set a function in the public API for creating new EventSource objects\r\n                if (htmx.blazorSwapSsr == undefined) {\r\n                    if (customElements.get('blazor-ssr-end') === undefined) {\r\n                        customElements.define('blazor-ssr-end', blazorStreamingUpdate);\r\n                    }\r\n                    htmx.blazorSwapSsr = blazorSwapSsr;\r\n                }\r\n            },\r\n            onEvent: function (name, evt) {\r\n                if (name === \"htmx:afterOnLoad\") {\r\n                    htmx?.process(document.body);\r\n                }\r\n                else if (name === \"htmx:beforeRequest\") {\r\n                    var element = evt.detail.elt;\r\n                    if (evt.detail.requestConfig.target) {\r\n                        evt.detail.requestConfig.target.addEventListener(\"htmx:beforeSwap\",\r\n                            e => {\r\n                                // Any html that was already streamed in could have been updated with\r\n                                // blazor ssr content so the final xhr response can be thrown away\r\n                                //e.detail.shouldSwap = false;\r\n                            }, { once: true });\r\n                    }\r\n\r\n                    var last = 0;\r\n                    var swapSpec = api.getSwapSpecification(element);\r\n                    var xhr = evt.detail.xhr;\r\n\r\n                    // Create a container id for a temporary div container. All streamed html will be placed \r\n                    // inside the container so that htmx swap methods work correctly\r\n                    var cid = 'ctr' + crypto.randomUUID();\r\n\r\n                    xhr.addEventListener(\"readystatechange\", () => {\r\n\r\n                        // If finished we can unwrap the container all html was stored into\r\n                        if (xhr.readyState === 4) {\r\n                            var container = document.getElementById(cid);\r\n\r\n                            if (container != null)\r\n                                unwrap(container);\r\n                        }\r\n                    });\r\n\r\n                    xhr.addEventListener(\"progress\", e => {\r\n\r\n                        var container = document.getElementById(cid);\r\n\r\n                        // If the container doesn't exist we need to create it and swap it into the element\r\n                        // target space. From here on we can stream responses into the container directly.\r\n                        if (container == null) {\r\n                            container = document.createElement('div');\r\n                            container.id = cid;\r\n\r\n                            // Swap in a container div to hold the streaming html\r\n                            swap(element, container.outerHTML, swapSpec, xhr);\r\n\r\n                            // The very first swap into the container can be a replacement swap\r\n                            swapSpec.swapStyle = \"innerHTML\";\r\n\r\n                            // Ensure there is always a container even if not added to the dom\r\n                            container = document.getElementById(cid) ?? container;\r\n                        }\r\n\r\n                        // Compute any new html in this chunk\r\n                        let diff = e.currentTarget.response.substring(last);\r\n                        swap(container, diff, swapSpec, xhr);\r\n\r\n                        swapSpec.settleDelay = 0;\r\n                        swapSpec.swapStyle = \"beforeend\";\r\n                        last = e.loaded;\r\n                    });\r\n\r\n                }\r\n\r\n                return true;\r\n            }\r\n        });\r\n\r\n    function isCommentNodeInHead(commentNode) {\r\n        // Ensure that the provided node is indeed a comment node\r\n        if (commentNode && commentNode.nodeType === Node.COMMENT_NODE) {\r\n            let currentNode = commentNode.parentNode;\r\n            // Traverse up the DOM tree\r\n            while (currentNode !== null) {\r\n                if (currentNode === document.head) {\r\n                    // The comment node is within the <head>\r\n                    return true;\r\n                }\r\n                currentNode = currentNode.parentNode;\r\n            }\r\n        } else {\r\n            return false;\r\n        }\r\n        // The traversal reached the root without finding <head>, or <head> does not exist\r\n        return false;\r\n    }\r\n\r\n    function blazorSwapSsr(start, end, docFrag, xhr) {\r\n        var newDiv = wrap(start, end, 'ssr' + crypto.randomUUID());\r\n\r\n        var container = document.createElement('div');\r\n        container.appendChild(docFrag);\r\n\r\n        swap(newDiv, container.innerHTML, xhr);\r\n\r\n        unwrap(newDiv);\r\n    }\r\n\r\n    function wrap(start, end, id) {\r\n\r\n        var newDiv = document.createElement('div');\r\n        newDiv.id = id;\r\n\r\n        // Iterate through nodes between start and end\r\n        var currentNode = start.nextSibling;\r\n        while (currentNode && currentNode !== end) {\r\n            newDiv.appendChild(currentNode);\r\n            currentNode = start.nextSibling;\r\n        }\r\n\r\n        start.parentNode.insertBefore(newDiv, end);\r\n\r\n        return newDiv;\r\n    }\r\n\r\n    function unwrap(element) {\r\n        // Ensure that the element has a parent\r\n        if (element.parentNode) {\r\n            // Move all child nodes out of the element\r\n            while (element.firstChild) {\r\n                element.parentNode.insertBefore(element.firstChild, element);\r\n            }\r\n\r\n            // Remove the empty element\r\n            element.parentNode.removeChild(element);\r\n        }\r\n    }\r\n\r\n    function handleOutOfBandSwaps(elt, fragment, settleInfo) {\r\n        var oobSelects = api.getClosestAttributeValue(elt, \"hx-select-oob\");\r\n        if (oobSelects) {\r\n            var oobSelectValues = oobSelects.split(\",\");\r\n            for (var i = 0; i < oobSelectValues.length; i++) {\r\n                var oobSelectValue = oobSelectValues[i].split(\":\", 2);\r\n                var id = oobSelectValue[0].trim();\r\n                if (id.indexOf(\"#\") === 0) {\r\n                    id = id.substring(1);\r\n                }\r\n                var oobValue = oobSelectValue[1] || \"true\";\r\n                var oobElement = fragment.querySelector(\"#\" + id);\r\n                if (oobElement) {\r\n                    api.oobSwap(oobValue, oobElement, settleInfo);\r\n                }\r\n            }\r\n        }\r\n        forEach(findAll(fragment, '[hx-swap-oob], [data-hx-swap-oob]'), function (oobElement) {\r\n            var oobValue = getAttributeValue(oobElement, \"hx-swap-oob\");\r\n            if (oobValue != null) {\r\n                api.oobSwap(oobValue, oobElement, settleInfo);\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * @param {HTMLElement} elt\r\n     * @param {string} content\r\n     */\r\n    function swap(elt, content, swapSpec, xhr) {\r\n\r\n        api.withExtensions(elt, function (extension) {\r\n            content = extension.transformResponse(content, xhr, elt);\r\n        });\r\n\r\n        swapSpec ??= api.getSwapSpecification(elt);\r\n        var target = api.getTarget(elt);\r\n        var settleInfo = api.makeSettleInfo(elt);\r\n\r\n        // htmx 2.0\r\n        api.swap(target, content, swapSpec);\r\n\r\n        //api.selectAndSwap(swapSpec.swapStyle, target, elt, content, settleInfo);\r\n\r\n        settleInfo.elts.forEach(function (elt) {\r\n            if (elt.classList) {\r\n                elt.classList.add(htmx.config.settlingClass);\r\n            }\r\n            api.triggerEvent(elt, 'htmx:beforeSettle');\r\n        });\r\n\r\n        // Handle settle tasks (with delay if requested)\r\n        if (swapSpec.settleDelay > 0) {\r\n            setTimeout(doSettle(settleInfo), swapSpec.settleDelay);\r\n        } else {\r\n            doSettle(settleInfo)();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * doSettle mirrors much of the functionality in htmx that\r\n     * settles elements after their content has been swapped.\r\n     * TODO: this should be published by htmx, and not duplicated here\r\n     * @param {import(\"../htmx\").HtmxSettleInfo} settleInfo\r\n     * @returns () => void\r\n     */\r\n    function doSettle(settleInfo) {\r\n\r\n        return function () {\r\n            settleInfo.tasks.forEach(function (task) {\r\n                task.call();\r\n            });\r\n\r\n            settleInfo.elts.forEach(function (elt) {\r\n                if (elt.classList) {\r\n                    elt.classList.remove(htmx.config.settlingClass);\r\n                }\r\n                api.triggerEvent(elt, 'htmx:afterSettle');\r\n            });\r\n        }\r\n    }\r\n\r\n    function insertStreamingContentIntoDocument(componentIdAsString, docFrag) {\r\n        const markers = findStreamingMarkers(componentIdAsString)\r\n        if (markers) {\r\n            const { startMarker, endMarker } = markers\r\n            enableDomPreservation = !isCommentNodeInHead(startMarker);\r\n            if (enableDomPreservation) {\r\n                blazorSwapSsr(startMarker, endMarker, docFrag);\r\n            } else {\r\n                // In this mode we completely delete the old content before inserting the new content\r\n                const destinationRoot = endMarker.parentNode\r\n                const existingContent = new Range()\r\n                existingContent.setStart(startMarker, startMarker.textContent.length)\r\n                existingContent.setEnd(endMarker, 0)\r\n                existingContent.deleteContents()\r\n\r\n                while (docFrag.childNodes[0]) {\r\n                    destinationRoot.insertBefore(docFrag.childNodes[0], endMarker)\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    function findStreamingMarkers(componentIdAsString) {\r\n        // Find start marker\r\n        const expectedStartText = `bl:${componentIdAsString}`\r\n        const iterator = document.createNodeIterator(\r\n            document,\r\n            NodeFilter.SHOW_COMMENT\r\n        )\r\n        let startMarker = null\r\n        while ((startMarker = iterator.nextNode())) {\r\n            if (startMarker.textContent === expectedStartText) {\r\n                break\r\n            }\r\n        }\r\n\r\n        if (!startMarker) {\r\n            return null\r\n        }\r\n\r\n        // Find end marker\r\n        const expectedEndText = `/bl:${componentIdAsString}`\r\n        let endMarker = null\r\n        while ((endMarker = iterator.nextNode())) {\r\n            if (endMarker.textContent === expectedEndText) {\r\n                break\r\n            }\r\n        }\r\n\r\n        return endMarker ? { startMarker, endMarker } : null\r\n    }\r\n})();","(function webpackUniversalModuleDefinition(root, factory) {\r\n\tif(typeof exports === 'object' && typeof module === 'object')\r\n\t\tmodule.exports = factory();\r\n\telse if(typeof define === 'function' && define.amd)\r\n\t\tdefine([], factory);\r\n\telse if(typeof exports === 'object')\r\n\t\texports[\"aspnetValidation\"] = factory();\r\n\telse\r\n\t\troot[\"aspnetValidation\"] = factory();\r\n})(self, () => {\r\nreturn /******/ (() => { // webpackBootstrap\r\n/******/ \t\"use strict\";\r\n/******/ \t// The require scope\r\n/******/ \tvar __webpack_require__ = {};\r\n/******/ \t\r\n/************************************************************************/\r\n/******/ \t/* webpack/runtime/define property getters */\r\n/******/ \t(() => {\r\n/******/ \t\t// define getter functions for harmony exports\r\n/******/ \t\t__webpack_require__.d = (exports, definition) => {\r\n/******/ \t\t\tfor(var key in definition) {\r\n/******/ \t\t\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\r\n/******/ \t\t\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\r\n/******/ \t\t\t\t}\r\n/******/ \t\t\t}\r\n/******/ \t\t};\r\n/******/ \t})();\r\n/******/ \t\r\n/******/ \t/* webpack/runtime/hasOwnProperty shorthand */\r\n/******/ \t(() => {\r\n/******/ \t\t__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))\r\n/******/ \t})();\r\n/******/ \t\r\n/******/ \t/* webpack/runtime/make namespace object */\r\n/******/ \t(() => {\r\n/******/ \t\t// define __esModule on exports\r\n/******/ \t\t__webpack_require__.r = (exports) => {\r\n/******/ \t\t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\r\n/******/ \t\t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\r\n/******/ \t\t\t}\r\n/******/ \t\t\tObject.defineProperty(exports, '__esModule', { value: true });\r\n/******/ \t\t};\r\n/******/ \t})();\r\n/******/ \t\r\n/************************************************************************/\r\nvar __webpack_exports__ = {};\r\n/*!**********************!*\\\r\n  !*** ./src/index.ts ***!\r\n  \\**********************/\r\n__webpack_require__.r(__webpack_exports__);\r\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\r\n/* harmony export */   MvcValidationProviders: () => (/* binding */ MvcValidationProviders),\r\n/* harmony export */   ValidationService: () => (/* binding */ ValidationService),\r\n/* harmony export */   isValidatable: () => (/* binding */ isValidatable)\r\n/* harmony export */ });\r\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (undefined && undefined.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nvar nullLogger = new (/** @class */ (function () {\r\n    function class_1() {\r\n        this.warn = globalThis.console.warn;\r\n    }\r\n    class_1.prototype.log = function (_) {\r\n        var _args = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            _args[_i - 1] = arguments[_i];\r\n        }\r\n    };\r\n    return class_1;\r\n}()))();\r\n/**\r\n * Checks if `element` is validatable (`input`, `select`, `textarea`).\r\n * @param element The element to check.\r\n * @returns `true` if validatable, otherwise `false`.\r\n */\r\nvar isValidatable = function (element) {\r\n    return element instanceof HTMLInputElement\r\n        || element instanceof HTMLSelectElement\r\n        || element instanceof HTMLTextAreaElement;\r\n};\r\nvar validatableElementTypes = ['input', 'select', 'textarea'];\r\n/**\r\n * Generates a selector to match validatable elements (`input`, `select`, `textarea`).\r\n * @param selector An optional selector to apply to the valid input types, e.g. `[data-val=\"true\"]`.\r\n * @returns The validatable elements.\r\n */\r\nvar validatableSelector = function (selector) {\r\n    return validatableElementTypes.map(function (t) { return \"\".concat(t).concat(selector || ''); }).join(',');\r\n};\r\n/**\r\n * Resolves and returns the element referred by original element using ASP.NET selector logic.\r\n * @param element - The input to validate\r\n * @param selector - Used to find the field. Ex. *.Password where * replaces whatever prefixes asp.net might add.\r\n */\r\nfunction getRelativeFormElement(element, selector) {\r\n    // example elementName: Form.PasswordConfirm, Form.Email\r\n    // example selector (dafuq): *.Password, *.__RequestVerificationToken\r\n    // example result element name: Form.Password, __RequestVerificationToken\r\n    var elementName = element.name;\r\n    var selectedName = selector.substring(2); // Password, __RequestVerificationToken\r\n    var objectName = '';\r\n    var dotLocation = elementName.lastIndexOf('.');\r\n    if (dotLocation > -1) {\r\n        // Form\r\n        objectName = elementName.substring(0, dotLocation);\r\n        // Form.Password\r\n        var relativeElementName = objectName + '.' + selectedName;\r\n        var relativeElement = document.getElementsByName(relativeElementName)[0];\r\n        if (isValidatable(relativeElement)) {\r\n            return relativeElement;\r\n        }\r\n    }\r\n    // __RequestVerificationToken\r\n    return element.form.querySelector(validatableSelector(\"[name=\".concat(selectedName, \"]\")));\r\n}\r\n/**\r\n * Contains default implementations for ASP.NET Core MVC validation attributes.\r\n */\r\nvar MvcValidationProviders = /** @class */ (function () {\r\n    function MvcValidationProviders() {\r\n        /**\r\n         * Validates whether the input has a value.\r\n         */\r\n        this.required = function (value, element, params) {\r\n            // Handle single and multiple checkboxes/radio buttons.\r\n            var elementType = element.type.toLowerCase();\r\n            if (elementType === \"checkbox\" || elementType === \"radio\") {\r\n                var allElementsOfThisName = Array.from(element.form.querySelectorAll(validatableSelector(\"[name='\".concat(element.name, \"'][type='\").concat(elementType, \"']\"))));\r\n                for (var _i = 0, allElementsOfThisName_1 = allElementsOfThisName; _i < allElementsOfThisName_1.length; _i++) {\r\n                    var element_1 = allElementsOfThisName_1[_i];\r\n                    if (element_1 instanceof HTMLInputElement && element_1.checked === true) {\r\n                        return true;\r\n                    }\r\n                }\r\n                // Checkboxes do not submit a value when unchecked. To work around this, platforms such as ASP.NET render a\r\n                // hidden input with the same name as the checkbox so that a value (\"false\") is still submitted even when\r\n                // the checkbox is not checked. We check this special case here.\r\n                if (elementType === \"checkbox\") {\r\n                    var checkboxHiddenInput = element.form.querySelector(\"input[name='\".concat(element.name, \"'][type='hidden']\"));\r\n                    if (checkboxHiddenInput instanceof HTMLInputElement && checkboxHiddenInput.value === \"false\") {\r\n                        return true;\r\n                    }\r\n                }\r\n                return false;\r\n            }\r\n            // Default behavior otherwise (trim ensures whitespace only is not seen as valid).\r\n            return Boolean(value === null || value === void 0 ? void 0 : value.trim());\r\n        };\r\n        /**\r\n         * Validates whether the input value satisfies the length contstraint.\r\n         */\r\n        this.stringLength = function (value, element, params) {\r\n            if (!value) {\r\n                return true;\r\n            }\r\n            if (params.min) {\r\n                var min = parseInt(params.min);\r\n                if (value.length < min) {\r\n                    return false;\r\n                }\r\n            }\r\n            if (params.max) {\r\n                var max = parseInt(params.max);\r\n                if (value.length > max) {\r\n                    return false;\r\n                }\r\n            }\r\n            return true;\r\n        };\r\n        /**\r\n         * Validates whether the input value is equal to another input value.\r\n         */\r\n        this.compare = function (value, element, params) {\r\n            if (!params.other) {\r\n                return true;\r\n            }\r\n            var otherElement = getRelativeFormElement(element, params.other);\r\n            if (!otherElement) {\r\n                return true;\r\n            }\r\n            return (otherElement.value === value);\r\n        };\r\n        /**\r\n         * Validates whether the input value is a number within a given range.\r\n         */\r\n        this.range = function (value, element, params) {\r\n            if (!value) {\r\n                return true;\r\n            }\r\n            var val = parseFloat(value);\r\n            if (isNaN(val)) {\r\n                return false;\r\n            }\r\n            if (params.min) {\r\n                var min = parseFloat(params.min);\r\n                if (val < min) {\r\n                    return false;\r\n                }\r\n            }\r\n            if (params.max) {\r\n                var max = parseFloat(params.max);\r\n                if (val > max) {\r\n                    return false;\r\n                }\r\n            }\r\n            return true;\r\n        };\r\n        /**\r\n         * Validates whether the input value satisfies a regular expression pattern.\r\n         */\r\n        this.regex = function (value, element, params) {\r\n            if (!value || !params.pattern) {\r\n                return true;\r\n            }\r\n            var r = new RegExp(params.pattern);\r\n            return r.test(value);\r\n        };\r\n        /**\r\n         * Validates whether the input value is an email in accordance to RFC822 specification, with a top level domain.\r\n         */\r\n        this.email = function (value, element, params) {\r\n            if (!value) {\r\n                return true;\r\n            }\r\n            // RFC822 email address with .TLD validation\r\n            // (c) Richard Willis, Chris Ferdinandi, MIT Licensed\r\n            // https://gist.github.com/badsyntax/719800\r\n            // https://gist.github.com/cferdinandi/d04aad4ce064b8da3edf21e26f8944c4\r\n            var r = /^([^\\x00-\\x20\\x22\\x28\\x29\\x2c\\x2e\\x3a-\\x3c\\x3e\\x40\\x5b-\\x5d\\x7f-\\xff]+|\\x22([^\\x0d\\x22\\x5c\\x80-\\xff]|\\x5c[\\x00-\\x7f])*\\x22)(\\x2e([^\\x00-\\x20\\x22\\x28\\x29\\x2c\\x2e\\x3a-\\x3c\\x3e\\x40\\x5b-\\x5d\\x7f-\\xff]+|\\x22([^\\x0d\\x22\\x5c\\x80-\\xff]|\\x5c[\\x00-\\x7f])*\\x22))*\\x40([^\\x00-\\x20\\x22\\x28\\x29\\x2c\\x2e\\x3a-\\x3c\\x3e\\x40\\x5b-\\x5d\\x7f-\\xff]+|\\x5b([^\\x0d\\x5b-\\x5d\\x80-\\xff]|\\x5c[\\x00-\\x7f])*\\x5d)(\\x2e([^\\x00-\\x20\\x22\\x28\\x29\\x2c\\x2e\\x3a-\\x3c\\x3e\\x40\\x5b-\\x5d\\x7f-\\xff]+|\\x5b([^\\x0d\\x5b-\\x5d\\x80-\\xff]|\\x5c[\\x00-\\x7f])*\\x5d))*(\\.\\w{2,})+$/;\r\n            return r.test(value);\r\n        };\r\n        /**\r\n         * Validates whether the input value is a credit card number, with Luhn's Algorithm.\r\n         */\r\n        this.creditcard = function (value, element, params) {\r\n            if (!value) {\r\n                return true;\r\n            }\r\n            // (c) jquery-validation, MIT Licensed\r\n            // https://github.com/jquery-validation/jquery-validation/blob/master/src/additional/creditcard.js\r\n            // based on https://en.wikipedia.org/wiki/Luhn_algorithm\r\n            // Accept only spaces, digits and dashes\r\n            if (/[^0-9 \\-]+/.test(value)) {\r\n                return false;\r\n            }\r\n            var nCheck = 0, nDigit = 0, bEven = false, n, cDigit;\r\n            value = value.replace(/\\D/g, \"\");\r\n            // Basing min and max length on https://developer.ean.com/general_info/Valid_Credit_Card_Types\r\n            if (value.length < 13 || value.length > 19) {\r\n                return false;\r\n            }\r\n            for (n = value.length - 1; n >= 0; n--) {\r\n                cDigit = value.charAt(n);\r\n                nDigit = parseInt(cDigit, 10);\r\n                if (bEven) {\r\n                    if ((nDigit *= 2) > 9) {\r\n                        nDigit -= 9;\r\n                    }\r\n                }\r\n                nCheck += nDigit;\r\n                bEven = !bEven;\r\n            }\r\n            return (nCheck % 10) === 0;\r\n        };\r\n        /**\r\n         * Validates whether the input value is a URL.\r\n         */\r\n        this.url = function (value, element, params) {\r\n            if (!value) {\r\n                return true;\r\n            }\r\n            var lowerCaseValue = value.toLowerCase();\r\n            // Match the logic in `UrlAttribute`\r\n            return lowerCaseValue.indexOf('http://') > -1\r\n                || lowerCaseValue.indexOf('https://') > -1\r\n                || lowerCaseValue.indexOf('ftp://') > -1;\r\n        };\r\n        /**\r\n         * Validates whether the input value is a phone number.\r\n         */\r\n        this.phone = function (value, element, params) {\r\n            if (!value) {\r\n                return true;\r\n            }\r\n            // Allows whitespace or dash as number separator because some people like to do that...\r\n            var consecutiveSeparator = /[\\+\\-\\s][\\-\\s]/g;\r\n            if (consecutiveSeparator.test(value)) {\r\n                return false;\r\n            }\r\n            var r = /^\\+?[0-9\\-\\s]+$/;\r\n            return r.test(value);\r\n        };\r\n        /**\r\n         * Asynchronously validates the input value to a JSON GET API endpoint.\r\n         */\r\n        this.remote = function (value, element, params) {\r\n            if (!value) {\r\n                return true;\r\n            }\r\n            // params.additionalfields: *.Email,*.Username\r\n            var fieldSelectors = params.additionalfields.split(',');\r\n            var fields = {};\r\n            for (var _i = 0, fieldSelectors_1 = fieldSelectors; _i < fieldSelectors_1.length; _i++) {\r\n                var fieldSelector = fieldSelectors_1[_i];\r\n                var fieldName = fieldSelector.substr(2);\r\n                var fieldElement = getRelativeFormElement(element, fieldSelector);\r\n                var hasValue = Boolean(fieldElement && fieldElement.value);\r\n                if (!hasValue) {\r\n                    continue;\r\n                }\r\n                if (fieldElement instanceof HTMLInputElement &&\r\n                    (fieldElement.type === 'checkbox' || fieldElement.type === 'radio')) {\r\n                    fields[fieldName] = fieldElement.checked ? fieldElement.value : '';\r\n                }\r\n                else {\r\n                    fields[fieldName] = fieldElement.value;\r\n                }\r\n            }\r\n            var url = params['url'];\r\n            var encodedParams = [];\r\n            for (var fieldName in fields) {\r\n                var encodedParam = encodeURIComponent(fieldName) + '=' + encodeURIComponent(fields[fieldName]);\r\n                encodedParams.push(encodedParam);\r\n            }\r\n            var payload = encodedParams.join('&');\r\n            return new Promise(function (ok, reject) {\r\n                var request = new XMLHttpRequest();\r\n                if (params.type && params.type.toLowerCase() === 'post') {\r\n                    var postData = new FormData();\r\n                    for (var fieldName in fields) {\r\n                        postData.append(fieldName, fields[fieldName]);\r\n                    }\r\n                    request.open('post', url);\r\n                    request.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');\r\n                    request.send(payload);\r\n                }\r\n                else {\r\n                    request.open('get', url + '?' + payload);\r\n                    request.send();\r\n                }\r\n                request.onload = function (e) {\r\n                    if (request.status >= 200 && request.status < 300) {\r\n                        var data = JSON.parse(request.responseText);\r\n                        ok(data);\r\n                    }\r\n                    else {\r\n                        reject({\r\n                            status: request.status,\r\n                            statusText: request.statusText,\r\n                            data: request.responseText\r\n                        });\r\n                    }\r\n                };\r\n                request.onerror = function (e) {\r\n                    reject({\r\n                        status: request.status,\r\n                        statusText: request.statusText,\r\n                        data: request.responseText\r\n                    });\r\n                };\r\n            });\r\n        };\r\n    }\r\n    return MvcValidationProviders;\r\n}());\r\n\r\n/**\r\n * Responsible for managing the DOM elements and running the validation providers.\r\n */\r\nvar ValidationService = /** @class */ (function () {\r\n    function ValidationService(logger) {\r\n        var _this = this;\r\n        /**\r\n         * A key-value collection of loaded validation plugins.\r\n         */\r\n        this.providers = {};\r\n        /**\r\n         * A key-value collection of form UIDs and their <span> elements for displaying validation messages for an input (by DOM name).\r\n         */\r\n        this.messageFor = {};\r\n        /**\r\n         * A list of managed elements, each having a randomly assigned unique identifier (UID).\r\n         */\r\n        this.elementUIDs = [];\r\n        /**\r\n         * A key-value collection of UID to Element for quick lookup.\r\n         */\r\n        this.elementByUID = {};\r\n        /**\r\n         * A key-value collection of input UIDs for a <form> UID.\r\n         */\r\n        this.formInputs = {};\r\n        /**\r\n         * A key-value map for input UID to its validator factory.\r\n         */\r\n        this.validators = {};\r\n        /**\r\n         * A key-value map for form UID to its trigger element (submit event for <form>).\r\n         */\r\n        this.formEvents = {};\r\n        /**\r\n         * A key-value map for element UID to its trigger element (input event for <textarea> and <input>, change event for <select>).\r\n         */\r\n        this.inputEvents = {};\r\n        /**\r\n         * A key-value map of input UID to its validation error message.\r\n         */\r\n        this.summary = {};\r\n        /**\r\n         * In milliseconds, the rate of fire of the input validation.\r\n         */\r\n        this.debounce = 300;\r\n        /**\r\n         * Allow hidden fields validation\r\n         */\r\n        this.allowHiddenFields = false;\r\n        /**\r\n         * Fires off validation for elements within the provided form and then calls the callback\r\n         * @param form The form to validate.\r\n         * @param callback Receives true or false indicating validity after all validation is complete.\r\n         * @returns Promise that resolves to true or false indicating validity after all validation is complete.\r\n         */\r\n        this.validateForm = function (form, callback) { return __awaiter(_this, void 0, void 0, function () {\r\n            var formUID, formValidationEvent, _a;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0:\r\n                        if (!(form instanceof HTMLFormElement)) {\r\n                            throw new Error('validateForm() can only be called on <form> elements');\r\n                        }\r\n                        formUID = this.getElementUID(form);\r\n                        formValidationEvent = this.formEvents[formUID];\r\n                        _a = !formValidationEvent;\r\n                        if (_a) return [3 /*break*/, 2];\r\n                        return [4 /*yield*/, formValidationEvent(undefined, callback)];\r\n                    case 1:\r\n                        _a = (_b.sent());\r\n                        _b.label = 2;\r\n                    case 2: return [2 /*return*/, _a];\r\n                }\r\n            });\r\n        }); };\r\n        /**\r\n         * Fires off validation for the provided element and then calls the callback\r\n         * @param field The element to validate.\r\n         * @param callback Receives true or false indicating validity after all validation is complete.\r\n         * @returns Promise that resolves to true or false indicating validity after all validation is complete\r\n         */\r\n        this.validateField = function (field, callback) { return __awaiter(_this, void 0, void 0, function () {\r\n            var fieldUID, fieldValidationEvent, _a;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0:\r\n                        fieldUID = this.getElementUID(field);\r\n                        fieldValidationEvent = this.inputEvents[fieldUID];\r\n                        _a = !fieldValidationEvent;\r\n                        if (_a) return [3 /*break*/, 2];\r\n                        return [4 /*yield*/, fieldValidationEvent(undefined, callback)];\r\n                    case 1:\r\n                        _a = (_b.sent());\r\n                        _b.label = 2;\r\n                    case 2: return [2 /*return*/, _a];\r\n                }\r\n            });\r\n        }); };\r\n        /**\r\n         * Called before validating form submit events.\r\n         * Default calls `preventDefault()` and `stopImmediatePropagation()`.\r\n         * @param submitEvent The `SubmitEvent`.\r\n         */\r\n        this.preValidate = function (submitEvent) {\r\n            submitEvent.preventDefault();\r\n            submitEvent.stopImmediatePropagation();\r\n        };\r\n        /**\r\n         * Handler for validated form submit events.\r\n         * Default calls `submitValidForm(form, submitEvent)` on success\r\n         * and `focusFirstInvalid(form)` on failure.\r\n         * @param form The form that has been validated.\r\n         * @param success The validation result.\r\n         * @param submitEvent The `SubmitEvent`.\r\n         */\r\n        this.handleValidated = function (form, success, submitEvent) {\r\n            if (!(form instanceof HTMLFormElement)) {\r\n                throw new Error('handleValidated() can only be called on <form> elements');\r\n            }\r\n            if (success) {\r\n                if (submitEvent) {\r\n                    _this.submitValidForm(form, submitEvent);\r\n                }\r\n            }\r\n            else {\r\n                _this.focusFirstInvalid(form);\r\n            }\r\n        };\r\n        /**\r\n         * Dispatches a new `SubmitEvent` on the provided form,\r\n         * then calls `form.submit()` unless `submitEvent` is cancelable\r\n         * and `preventDefault()` was called by a handler that received the new event.\r\n         *\r\n         * This is equivalent to `form.requestSubmit()`, but more flexible.\r\n         * @param form The validated form to submit\r\n         * @param submitEvent The `SubmitEvent`.\r\n         */\r\n        this.submitValidForm = function (form, submitEvent) {\r\n            if (!(form instanceof HTMLFormElement)) {\r\n                throw new Error('submitValidForm() can only be called on <form> elements');\r\n            }\r\n            var newEvent = new SubmitEvent('submit', submitEvent);\r\n            if (form.dispatchEvent(newEvent)) {\r\n                // Because the submitter is not propagated when calling\r\n                // form.submit(), we recreate it here.\r\n                var submitter = submitEvent.submitter;\r\n                var submitterInput = null;\r\n                var initialFormAction = form.action;\r\n                if (submitter) {\r\n                    var name_1 = submitter.getAttribute('name');\r\n                    // If name is null, a submit button is not submitted.\r\n                    if (name_1) {\r\n                        submitterInput = document.createElement('input');\r\n                        submitterInput.type = 'hidden';\r\n                        submitterInput.name = name_1;\r\n                        submitterInput.value = submitter.getAttribute('value');\r\n                        form.appendChild(submitterInput);\r\n                    }\r\n                    var formAction = submitter.getAttribute('formaction');\r\n                    if (formAction) {\r\n                        form.action = formAction;\r\n                    }\r\n                }\r\n                try {\r\n                    form.submit();\r\n                }\r\n                finally {\r\n                    if (submitterInput) {\r\n                        // Important to clean up the submit input we created.\r\n                        form.removeChild(submitterInput);\r\n                    }\r\n                    form.action = initialFormAction;\r\n                }\r\n            }\r\n        };\r\n        /**\r\n         * Focuses the first invalid element within the provided form\r\n         * @param form\r\n         */\r\n        this.focusFirstInvalid = function (form) {\r\n            if (!(form instanceof HTMLFormElement)) {\r\n                throw new Error('focusFirstInvalid() can only be called on <form> elements');\r\n            }\r\n            var formUID = _this.getElementUID(form);\r\n            var formInputUIDs = _this.formInputs[formUID];\r\n            var invalidFormInputUID = formInputUIDs === null || formInputUIDs === void 0 ? void 0 : formInputUIDs.find(function (uid) { return _this.summary[uid]; });\r\n            if (invalidFormInputUID) {\r\n                var firstInvalid = _this.elementByUID[invalidFormInputUID];\r\n                if (firstInvalid instanceof HTMLElement) {\r\n                    firstInvalid.focus();\r\n                }\r\n            }\r\n        };\r\n        /**\r\n         * Returns true if the provided form is currently valid.\r\n         * The form will be validated unless prevalidate is set to false.\r\n         * @param form The form to validate.\r\n         * @param prevalidate Whether the form should be validated before returning.\r\n         * @param callback A callback that receives true or false indicating validity after all validation is complete. Ignored if prevalidate is false.\r\n         * @returns The current state of the form. May be inaccurate if any validation is asynchronous (e.g. remote); consider using `callback` instead.\r\n         */\r\n        this.isValid = function (form, prevalidate, callback) {\r\n            if (prevalidate === void 0) { prevalidate = true; }\r\n            if (!(form instanceof HTMLFormElement)) {\r\n                throw new Error('isValid() can only be called on <form> elements');\r\n            }\r\n            if (prevalidate) {\r\n                _this.validateForm(form, callback);\r\n            }\r\n            var formUID = _this.getElementUID(form);\r\n            var formInputUIDs = _this.formInputs[formUID];\r\n            var formIsInvalid = (formInputUIDs === null || formInputUIDs === void 0 ? void 0 : formInputUIDs.some(function (uid) { return _this.summary[uid]; })) === true;\r\n            return !formIsInvalid;\r\n        };\r\n        /**\r\n         * Returns true if the provided field is currently valid.\r\n         * The field will be validated unless prevalidate is set to false.\r\n         * @param field The field to validate.\r\n         * @param prevalidate Whether the field should be validated before returning.\r\n         * @param callback A callback that receives true or false indicating validity after all validation is complete. Ignored if prevalidate is false.\r\n         * @returns The current state of the field. May be inaccurate if any validation is asynchronous (e.g. remote); consider using `callback` instead.\r\n         */\r\n        this.isFieldValid = function (field, prevalidate, callback) {\r\n            if (prevalidate === void 0) { prevalidate = true; }\r\n            if (prevalidate) {\r\n                _this.validateField(field, callback);\r\n            }\r\n            var fieldUID = _this.getElementUID(field);\r\n            return _this.summary[fieldUID] === undefined;\r\n        };\r\n        /**\r\n         * Options for this instance of @type {ValidationService}.\r\n         */\r\n        this.options = {\r\n            root: document.body,\r\n            watch: false,\r\n            addNoValidate: true,\r\n        };\r\n        /**\r\n         * Override CSS class name for input validation error. Default: 'input-validation-error'\r\n         */\r\n        this.ValidationInputCssClassName = \"input-validation-error\";\r\n        /**\r\n         * Override CSS class name for valid input validation. Default: 'input-validation-valid'\r\n         */\r\n        this.ValidationInputValidCssClassName = \"input-validation-valid\";\r\n        /**\r\n         * Override CSS class name for field validation error. Default: 'field-validation-error'\r\n         */\r\n        this.ValidationMessageCssClassName = \"field-validation-error\";\r\n        /**\r\n         * Override CSS class name for valid field validation. Default: 'field-validation-valid'\r\n         */\r\n        this.ValidationMessageValidCssClassName = \"field-validation-valid\";\r\n        /**\r\n         * Override CSS class name for validation summary error. Default: 'validation-summary-errors'\r\n         */\r\n        this.ValidationSummaryCssClassName = \"validation-summary-errors\";\r\n        /**\r\n         * Override CSS class name for valid validation summary. Default: 'validation-summary-valid'\r\n         */\r\n        this.ValidationSummaryValidCssClassName = \"validation-summary-valid\";\r\n        this.logger = logger || nullLogger;\r\n    }\r\n    /**\r\n     * Registers a new validation plugin of the given name, if not registered yet.\r\n     * Registered plugin validates inputs with data-val-[name] attribute, used as error message.\r\n     * @param name\r\n     * @param callback\r\n     */\r\n    ValidationService.prototype.addProvider = function (name, callback) {\r\n        if (this.providers[name]) {\r\n            // First-Come-First-Serve validation plugin design.\r\n            // Allows developers to override the default MVC Providers by adding custom providers BEFORE bootstrap() is called!\r\n            return;\r\n        }\r\n        this.logger.log(\"Registered provider: %s\", name);\r\n        this.providers[name] = callback;\r\n    };\r\n    /**\r\n     * Registers the default providers for enabling ASP.NET Core MVC client-side validation.\r\n     */\r\n    ValidationService.prototype.addMvcProviders = function () {\r\n        var mvc = new MvcValidationProviders();\r\n        // [Required]\r\n        this.addProvider('required', mvc.required);\r\n        // [StringLength], [MinLength], [MaxLength]\r\n        this.addProvider('length', mvc.stringLength);\r\n        this.addProvider('maxlength', mvc.stringLength);\r\n        this.addProvider('minlength', mvc.stringLength);\r\n        // [Compare]\r\n        this.addProvider('equalto', mvc.compare);\r\n        // [Range]\r\n        this.addProvider('range', mvc.range);\r\n        // [RegularExpression]\r\n        this.addProvider('regex', mvc.regex);\r\n        // [CreditCard]\r\n        this.addProvider('creditcard', mvc.creditcard);\r\n        // [EmailAddress]\r\n        this.addProvider('email', mvc.email);\r\n        // [Url]\r\n        this.addProvider('url', mvc.url);\r\n        // [Phone]\r\n        this.addProvider('phone', mvc.phone);\r\n        // [Remote]\r\n        this.addProvider('remote', mvc.remote);\r\n    };\r\n    /**\r\n     * Scans `root` for all validation message <span> generated by ASP.NET Core MVC, then calls `cb` for each.\r\n     * @param root The root node to scan\r\n     * @param cb The callback to invoke with each form and span\r\n     */\r\n    ValidationService.prototype.scanMessages = function (root, cb) {\r\n        /* If a validation span explicitly declares a form, we group the span with that form. */\r\n        var validationMessageElements = Array.from(root.querySelectorAll('span[form]'));\r\n        for (var _i = 0, validationMessageElements_1 = validationMessageElements; _i < validationMessageElements_1.length; _i++) {\r\n            var span = validationMessageElements_1[_i];\r\n            var form = document.getElementById(span.getAttribute('form'));\r\n            if (form instanceof HTMLFormElement) {\r\n                cb.call(this, form, span);\r\n            }\r\n        }\r\n        // Otherwise if a validation message span is inside a form, we group the span with the form it's inside.\r\n        var forms = Array.from(root.querySelectorAll('form'));\r\n        if (root instanceof HTMLFormElement) {\r\n            // querySelectorAll does not include the root element itself.\r\n            // we could use 'matches', but that's newer than querySelectorAll so we'll keep it simple and compatible.\r\n            forms.push(root);\r\n        }\r\n        // If root is the descendant of a form, we want to include that form too.\r\n        var containingForm = (root instanceof Element) ? root.closest('form') : null;\r\n        if (containingForm) {\r\n            forms.push(containingForm);\r\n        }\r\n        for (var _a = 0, forms_1 = forms; _a < forms_1.length; _a++) {\r\n            var form = forms_1[_a];\r\n            var validationMessageElements_3 = Array.from(form.querySelectorAll('[data-valmsg-for]'));\r\n            for (var _b = 0, validationMessageElements_2 = validationMessageElements_3; _b < validationMessageElements_2.length; _b++) {\r\n                var span = validationMessageElements_2[_b];\r\n                cb.call(this, form, span);\r\n            }\r\n        }\r\n    };\r\n    ValidationService.prototype.pushValidationMessageSpan = function (form, span) {\r\n        var _a, _b;\r\n        var _c;\r\n        var formId = this.getElementUID(form);\r\n        var formSpans = (_a = (_c = this.messageFor)[formId]) !== null && _a !== void 0 ? _a : (_c[formId] = {});\r\n        var messageForId = span.getAttribute('data-valmsg-for');\r\n        if (!messageForId)\r\n            return;\r\n        var spans = (_b = formSpans[messageForId]) !== null && _b !== void 0 ? _b : (formSpans[messageForId] = []);\r\n        if (spans.indexOf(span) < 0) {\r\n            spans.push(span);\r\n        }\r\n        else {\r\n            this.logger.log(\"Validation element for '%s' is already tracked\", name, span);\r\n        }\r\n    };\r\n    ValidationService.prototype.removeValidationMessageSpan = function (form, span) {\r\n        var formId = this.getElementUID(form);\r\n        var formSpans = this.messageFor[formId];\r\n        if (!formSpans)\r\n            return;\r\n        var messageForId = span.getAttribute('data-valmsg-for');\r\n        if (!messageForId)\r\n            return;\r\n        var spans = formSpans[messageForId];\r\n        if (!spans) {\r\n            return;\r\n        }\r\n        var index = spans.indexOf(span);\r\n        if (index >= 0) {\r\n            spans.splice(index, 1);\r\n        }\r\n        else {\r\n            this.logger.log(\"Validation element for '%s' was already removed\", name, span);\r\n        }\r\n    };\r\n    /**\r\n     * Given attribute map for an HTML input, returns the validation directives to be executed.\r\n     * @param attributes\r\n     */\r\n    ValidationService.prototype.parseDirectives = function (attributes) {\r\n        var directives = {};\r\n        var validationAtributes = {};\r\n        var cut = 'data-val-'.length;\r\n        for (var i = 0; i < attributes.length; i++) {\r\n            var a = attributes[i];\r\n            if (a.name.indexOf('data-val-') === 0) {\r\n                var key = a.name.substr(cut);\r\n                validationAtributes[key] = a.value;\r\n            }\r\n        }\r\n        var _loop_1 = function (key) {\r\n            if (key.indexOf('-') === -1) {\r\n                var parameters = Object.keys(validationAtributes).filter(function (Q) {\r\n                    return (Q !== key) && (Q.indexOf(key) === 0);\r\n                });\r\n                var directive = {\r\n                    error: validationAtributes[key],\r\n                    params: {}\r\n                };\r\n                var pcut = (key + '-').length;\r\n                for (var i = 0; i < parameters.length; i++) {\r\n                    var pvalue = validationAtributes[parameters[i]];\r\n                    var pkey = parameters[i].substr(pcut);\r\n                    directive.params[pkey] = pvalue;\r\n                }\r\n                directives[key] = directive;\r\n            }\r\n        };\r\n        for (var key in validationAtributes) {\r\n            _loop_1(key);\r\n        }\r\n        return directives;\r\n    };\r\n    /**\r\n     *  Returns an RFC4122 version 4 compliant GUID.\r\n     */\r\n    ValidationService.prototype.guid4 = function () {\r\n        // (c) broofa, MIT Licensed\r\n        // https://stackoverflow.com/questions/105034/create-guid-uuid-in-javascript/2117523#2117523\r\n        return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\r\n            var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);\r\n            return v.toString(16);\r\n        });\r\n    };\r\n    /**\r\n     * Gets a UID for an DOM element.\r\n     * @param node\r\n     */\r\n    ValidationService.prototype.getElementUID = function (node) {\r\n        var x = this.elementUIDs.filter(function (e) {\r\n            return e.node === node;\r\n        })[0];\r\n        if (x) {\r\n            return x.uid;\r\n        }\r\n        var uid = this.guid4();\r\n        this.elementUIDs.push({\r\n            node: node,\r\n            uid: uid\r\n        });\r\n        this.elementByUID[uid] = node;\r\n        return uid;\r\n    };\r\n    /**\r\n     * Returns a Promise that returns validation result for each and every inputs within the form.\r\n     * @param formUID\r\n     */\r\n    ValidationService.prototype.getFormValidationTask = function (formUID) {\r\n        var formInputUIDs = this.formInputs[formUID];\r\n        if (!formInputUIDs || formInputUIDs.length === 0) {\r\n            return Promise.resolve(true);\r\n        }\r\n        var formValidators = [];\r\n        for (var _i = 0, formInputUIDs_1 = formInputUIDs; _i < formInputUIDs_1.length; _i++) {\r\n            var inputUID = formInputUIDs_1[_i];\r\n            var validator = this.validators[inputUID];\r\n            if (validator) {\r\n                formValidators.push(validator);\r\n            }\r\n        }\r\n        var tasks = formValidators.map(function (factory) { return factory(); });\r\n        return Promise.all(tasks).then(function (result) { return result.every(function (e) { return e; }); });\r\n    };\r\n    // Retrieves the validation span for the input.\r\n    ValidationService.prototype.getMessageFor = function (input) {\r\n        var _a;\r\n        if (!input.form) {\r\n            return undefined;\r\n        }\r\n        var formId = this.getElementUID(input.form);\r\n        return (_a = this.messageFor[formId]) === null || _a === void 0 ? void 0 : _a[input.name];\r\n    };\r\n    /**\r\n     * Returns true if the event triggering the form submission indicates we should validate the form.\r\n     * @param e\r\n     */\r\n    ValidationService.prototype.shouldValidate = function (e) {\r\n        // Skip client-side validation if the form has been submitted via a button that has the \"formnovalidate\" attribute.\r\n        return !(e && e['submitter'] && e['submitter']['formNoValidate']);\r\n    };\r\n    /**\r\n     * Tracks a <form> element as parent of an input UID. When the form is submitted, attempts to validate the said input asynchronously.\r\n     * @param form\r\n     * @param inputUID\r\n     */\r\n    ValidationService.prototype.trackFormInput = function (form, inputUID) {\r\n        var _this = this;\r\n        var _a;\r\n        var _b;\r\n        var formUID = this.getElementUID(form);\r\n        var formInputUIDs = (_a = (_b = this.formInputs)[formUID]) !== null && _a !== void 0 ? _a : (_b[formUID] = []);\r\n        var add = formInputUIDs.indexOf(inputUID) === -1;\r\n        if (add) {\r\n            formInputUIDs.push(inputUID);\r\n            if (this.options.addNoValidate) {\r\n                this.logger.log('Setting novalidate on form', form);\r\n                form.setAttribute('novalidate', 'novalidate');\r\n            }\r\n            else {\r\n                this.logger.log('Not setting novalidate on form', form);\r\n            }\r\n        }\r\n        else {\r\n            this.logger.log(\"Form input for UID '%s' is already tracked\", inputUID);\r\n        }\r\n        if (this.formEvents[formUID]) {\r\n            return;\r\n        }\r\n        var validationTask = null;\r\n        var cb = function (e, callback) {\r\n            // Prevent recursion\r\n            if (validationTask) {\r\n                return validationTask;\r\n            }\r\n            if (!_this.shouldValidate(e)) {\r\n                return Promise.resolve(true);\r\n            }\r\n            validationTask = _this.getFormValidationTask(formUID);\r\n            //`preValidate` typically prevents submit before validation\r\n            if (e) {\r\n                _this.preValidate(e);\r\n            }\r\n            _this.logger.log('Validating', form);\r\n            return validationTask.then(function (success) { return __awaiter(_this, void 0, void 0, function () {\r\n                var validationEvent;\r\n                return __generator(this, function (_a) {\r\n                    switch (_a.label) {\r\n                        case 0:\r\n                            this.logger.log('Validated (success = %s)', success, form);\r\n                            if (callback) {\r\n                                callback(success);\r\n                                return [2 /*return*/, success];\r\n                            }\r\n                            validationEvent = new CustomEvent('validation', {\r\n                                detail: { valid: success }\r\n                            });\r\n                            form.dispatchEvent(validationEvent);\r\n                            // Firefox fix: redispatch 'submit' after finished handling this event\r\n                            return [4 /*yield*/, new Promise(function (resolve) { return setTimeout(resolve, 0); })];\r\n                        case 1:\r\n                            // Firefox fix: redispatch 'submit' after finished handling this event\r\n                            _a.sent();\r\n                            this.handleValidated(form, success, e);\r\n                            return [2 /*return*/, success];\r\n                    }\r\n                });\r\n            }); }).catch(function (error) {\r\n                _this.logger.log('Validation error', error);\r\n                return false;\r\n            }).finally(function () {\r\n                validationTask = null;\r\n            });\r\n        };\r\n        form.addEventListener('submit', cb);\r\n        var cbReset = function (e) {\r\n            var formInputUIDs = _this.formInputs[formUID];\r\n            for (var _i = 0, formInputUIDs_2 = formInputUIDs; _i < formInputUIDs_2.length; _i++) {\r\n                var inputUID_1 = formInputUIDs_2[_i];\r\n                _this.resetField(inputUID_1);\r\n            }\r\n            _this.renderSummary();\r\n        };\r\n        form.addEventListener('reset', cbReset);\r\n        cb.remove = function () {\r\n            form.removeEventListener('submit', cb);\r\n            form.removeEventListener('reset', cbReset);\r\n        };\r\n        this.formEvents[formUID] = cb;\r\n    };\r\n    /*\r\n        Reset the state of a validatable input. This is used when it's enabled or disabled.\r\n    */\r\n    ValidationService.prototype.reset = function (input) {\r\n        if (this.isDisabled(input)) {\r\n            this.resetField(this.getElementUID(input));\r\n        }\r\n        else {\r\n            this.scan(input);\r\n        }\r\n    };\r\n    ValidationService.prototype.resetField = function (inputUID) {\r\n        var input = this.elementByUID[inputUID];\r\n        this.swapClasses(input, '', this.ValidationInputCssClassName);\r\n        this.swapClasses(input, '', this.ValidationInputValidCssClassName);\r\n        var spans = isValidatable(input) && this.getMessageFor(input);\r\n        if (spans) {\r\n            for (var i = 0; i < spans.length; i++) {\r\n                spans[i].innerHTML = '';\r\n                this.swapClasses(spans[i], '', this.ValidationMessageCssClassName);\r\n                this.swapClasses(spans[i], '', this.ValidationMessageValidCssClassName);\r\n            }\r\n        }\r\n        delete this.summary[inputUID];\r\n    };\r\n    ValidationService.prototype.untrackFormInput = function (form, inputUID) {\r\n        var _a;\r\n        var formUID = this.getElementUID(form);\r\n        var formInputUIDs = this.formInputs[formUID];\r\n        if (!formInputUIDs) {\r\n            return;\r\n        }\r\n        var indexToRemove = formInputUIDs.indexOf(inputUID);\r\n        if (indexToRemove >= 0) {\r\n            formInputUIDs.splice(indexToRemove, 1);\r\n            if (!formInputUIDs.length) {\r\n                (_a = this.formEvents[formUID]) === null || _a === void 0 ? void 0 : _a.remove();\r\n                delete this.formEvents[formUID];\r\n                delete this.formInputs[formUID];\r\n                delete this.messageFor[formUID];\r\n            }\r\n        }\r\n        else {\r\n            this.logger.log(\"Form input for UID '%s' was already removed\", inputUID);\r\n        }\r\n    };\r\n    /**\r\n     * Adds an input element to be managed and validated by the service.\r\n     * Triggers a debounced live validation when input value changes.\r\n     * @param input\r\n     */\r\n    ValidationService.prototype.addInput = function (input) {\r\n        var _this = this;\r\n        var _a;\r\n        var uid = this.getElementUID(input);\r\n        var directives = this.parseDirectives(input.attributes);\r\n        this.validators[uid] = this.createValidator(input, directives);\r\n        if (input.form) {\r\n            this.trackFormInput(input.form, uid);\r\n        }\r\n        if (this.inputEvents[uid]) {\r\n            return;\r\n        }\r\n        var cb = function (event, callback) { return __awaiter(_this, void 0, void 0, function () {\r\n            var validate, success, error_1;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        validate = this.validators[uid];\r\n                        if (!validate)\r\n                            return [2 /*return*/, true];\r\n                        if (!input.dataset.valEvent &&\r\n                            event && event.type === 'input' &&\r\n                            !input.classList.contains(this.ValidationInputCssClassName)) {\r\n                            // When no data-val-event specified on a field, \"input\" event only takes it back to valid. \"Change\" event can make it invalid.\r\n                            return [2 /*return*/, true];\r\n                        }\r\n                        this.logger.log('Validating', { event: event });\r\n                        _a.label = 1;\r\n                    case 1:\r\n                        _a.trys.push([1, 3, , 4]);\r\n                        return [4 /*yield*/, validate()];\r\n                    case 2:\r\n                        success = _a.sent();\r\n                        callback(success);\r\n                        return [2 /*return*/, success];\r\n                    case 3:\r\n                        error_1 = _a.sent();\r\n                        this.logger.log('Validation error', error_1);\r\n                        return [2 /*return*/, false];\r\n                    case 4: return [2 /*return*/];\r\n                }\r\n            });\r\n        }); };\r\n        var debounceTimeoutID = null;\r\n        cb.debounced = function (event, callback) {\r\n            if (debounceTimeoutID !== null) {\r\n                clearTimeout(debounceTimeoutID);\r\n            }\r\n            debounceTimeoutID = setTimeout(function () {\r\n                cb(event, callback);\r\n            }, _this.debounce);\r\n        };\r\n        var defaultEvent = input instanceof HTMLSelectElement ? 'change' : 'input change';\r\n        var validateEvent = (_a = input.dataset.valEvent) !== null && _a !== void 0 ? _a : defaultEvent;\r\n        var events = validateEvent.split(' ');\r\n        events.forEach(function (eventName) {\r\n            input.addEventListener(eventName, cb.debounced);\r\n        });\r\n        cb.remove = function () {\r\n            events.forEach(function (eventName) {\r\n                input.removeEventListener(eventName, cb.debounced);\r\n            });\r\n        };\r\n        this.inputEvents[uid] = cb;\r\n    };\r\n    ValidationService.prototype.removeInput = function (input) {\r\n        var uid = this.getElementUID(input);\r\n        // Clean up event listener\r\n        var cb = this.inputEvents[uid];\r\n        if (cb === null || cb === void 0 ? void 0 : cb.remove) {\r\n            cb.remove();\r\n            delete cb.remove;\r\n        }\r\n        delete this.summary[uid];\r\n        delete this.inputEvents[uid];\r\n        delete this.validators[uid];\r\n        if (input.form) {\r\n            this.untrackFormInput(input.form, uid);\r\n        }\r\n    };\r\n    /**\r\n     * Scans `root` for input elements to be validated, then calls `cb` for each.\r\n     * @param root The root node to scan\r\n     * @param cb The callback to invoke with each input\r\n     */\r\n    ValidationService.prototype.scanInputs = function (root, cb) {\r\n        var inputs = Array.from(root.querySelectorAll(validatableSelector('[data-val=\"true\"]')));\r\n        // querySelectorAll does not include the root element itself.\r\n        // we could use 'matches', but that's newer than querySelectorAll so we'll keep it simple and compatible.\r\n        if (isValidatable(root) && root.getAttribute(\"data-val\") === \"true\") {\r\n            inputs.push(root);\r\n        }\r\n        for (var i = 0; i < inputs.length; i++) {\r\n            var input = inputs[i];\r\n            cb.call(this, input);\r\n        }\r\n    };\r\n    /**\r\n     * Returns a <ul> element as a validation errors summary.\r\n     */\r\n    ValidationService.prototype.createSummaryDOM = function () {\r\n        if (!Object.keys(this.summary).length) {\r\n            return null;\r\n        }\r\n        var renderedMessages = [];\r\n        var ul = document.createElement('ul');\r\n        for (var key in this.summary) {\r\n            // It could be that the message we are rendering belongs to one of a fieldset of multiple inputs that's not selected,\r\n            // even if another one in the fieldset is. In that case the fieldset is valid, and we shouldn't render the message.\r\n            var matchingElement = this.elementByUID[key];\r\n            if (matchingElement instanceof HTMLInputElement) {\r\n                if (matchingElement.type === \"checkbox\" || matchingElement.type === \"radio\") {\r\n                    if (matchingElement.className === this.ValidationInputValidCssClassName) {\r\n                        continue;\r\n                    }\r\n                }\r\n            }\r\n            // With required multiple inputs, such as a checkbox list, we'll have one message per input.\r\n            // It's one from the inputs that's required, not all, so we should only have one message displayed.\r\n            if (renderedMessages.indexOf(this.summary[key]) > -1) {\r\n                continue;\r\n            }\r\n            var li = document.createElement('li');\r\n            li.innerHTML = this.summary[key];\r\n            ul.appendChild(li);\r\n            renderedMessages.push(this.summary[key]);\r\n        }\r\n        return ul;\r\n    };\r\n    /**\r\n     * Displays validation summary to ASP.NET Core MVC designated elements, when it actually gets updated.\r\n     */\r\n    ValidationService.prototype.renderSummary = function () {\r\n        var summaryElements = document.querySelectorAll('[data-valmsg-summary=\"true\"]');\r\n        if (!summaryElements.length) {\r\n            return;\r\n        }\r\n        // Prevents wasteful re-rendering of summary list element with identical items!\r\n        // Using JSON.stringify for quick and painless deep compare of simple KVP. You need to sort the keys first, tho...\r\n        var shadow = JSON.stringify(this.summary, Object.keys(this.summary).sort());\r\n        if (shadow === this.renderedSummaryJSON) {\r\n            return;\r\n        }\r\n        // Prevents wasteful re-rendering of summary list element with identical items!\r\n        this.renderedSummaryJSON = shadow;\r\n        var ul = this.createSummaryDOM();\r\n        for (var i = 0; i < summaryElements.length; i++) {\r\n            var e = summaryElements[i];\r\n            // Remove existing list elements, but keep the summary's message.\r\n            var listElements = e.querySelectorAll(\"ul\");\r\n            for (var j = 0; j < listElements.length; j++) {\r\n                listElements[j].remove();\r\n            }\r\n            // Style the summary element as valid/invalid depending on whether there are any messages to display.\r\n            if (ul && ul.hasChildNodes()) {\r\n                this.swapClasses(e, this.ValidationSummaryCssClassName, this.ValidationSummaryValidCssClassName);\r\n                e.appendChild(ul.cloneNode(true));\r\n            }\r\n            else {\r\n                this.swapClasses(e, this.ValidationSummaryValidCssClassName, this.ValidationSummaryCssClassName);\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Adds an error message to an input element, which also updates the validation message elements and validation summary elements.\r\n     * @param input\r\n     * @param message\r\n     */\r\n    ValidationService.prototype.addError = function (input, message) {\r\n        var spans = this.getMessageFor(input);\r\n        if (spans) {\r\n            for (var i = 0; i < spans.length; i++) {\r\n                var span = spans[i];\r\n                spans[i].innerHTML = message;\r\n                this.swapClasses(spans[i], this.ValidationMessageCssClassName, this.ValidationMessageValidCssClassName);\r\n            }\r\n        }\r\n        this.highlight(input, this.ValidationInputCssClassName, this.ValidationInputValidCssClassName);\r\n        if (input.form) {\r\n            // Adding an error to one input should also add it to others with the same name (i.e. for radio button and checkbox lists).\r\n            var inputs = input.form.querySelectorAll(validatableSelector(\"[name=\\\"\".concat(input.name, \"\\\"]\")));\r\n            for (var i = 0; i < inputs.length; i++) {\r\n                this.swapClasses(inputs[i], this.ValidationInputCssClassName, this.ValidationInputValidCssClassName);\r\n                var uid = this.getElementUID(inputs[i]);\r\n                this.summary[uid] = message;\r\n            }\r\n        }\r\n        this.renderSummary();\r\n    };\r\n    /**\r\n     * Removes an error message from an input element, which also updates the validation message elements and validation summary elements.\r\n     * @param input\r\n     */\r\n    ValidationService.prototype.removeError = function (input) {\r\n        var spans = this.getMessageFor(input);\r\n        if (spans) {\r\n            for (var i = 0; i < spans.length; i++) {\r\n                spans[i].innerHTML = '';\r\n                this.swapClasses(spans[i], this.ValidationMessageValidCssClassName, this.ValidationMessageCssClassName);\r\n            }\r\n        }\r\n        this.unhighlight(input, this.ValidationInputCssClassName, this.ValidationInputValidCssClassName);\r\n        // Removing an error from one input should also remove it from others with the same name (i.e. for radio button and checkbox lists).\r\n        if (input.form) {\r\n            var inputs = input.form.querySelectorAll(validatableSelector(\"[name=\\\"\".concat(input.name, \"\\\"]\")));\r\n            for (var i = 0; i < inputs.length; i++) {\r\n                this.swapClasses(inputs[i], this.ValidationInputValidCssClassName, this.ValidationInputCssClassName);\r\n                var uid = this.getElementUID(inputs[i]);\r\n                delete this.summary[uid];\r\n            }\r\n        }\r\n        this.renderSummary();\r\n    };\r\n    /**\r\n     * Returns a validation Promise factory for an input element, using given validation directives.\r\n     * @param input\r\n     * @param directives\r\n     */\r\n    ValidationService.prototype.createValidator = function (input, directives) {\r\n        var _this = this;\r\n        return function () { return __awaiter(_this, void 0, void 0, function () {\r\n            var _a, _b, _c, _i, key, directive, provider, result, valid, error, resolution;\r\n            return __generator(this, function (_d) {\r\n                switch (_d.label) {\r\n                    case 0:\r\n                        if (!(!this.isHidden(input) && !this.isDisabled(input))) return [3 /*break*/, 7];\r\n                        _a = directives;\r\n                        _b = [];\r\n                        for (_c in _a)\r\n                            _b.push(_c);\r\n                        _i = 0;\r\n                        _d.label = 1;\r\n                    case 1:\r\n                        if (!(_i < _b.length)) return [3 /*break*/, 7];\r\n                        _c = _b[_i];\r\n                        if (!(_c in _a)) return [3 /*break*/, 6];\r\n                        key = _c;\r\n                        directive = directives[key];\r\n                        provider = this.providers[key];\r\n                        if (!provider) {\r\n                            this.logger.log('aspnet-validation provider not implemented: %s', key);\r\n                            return [3 /*break*/, 6];\r\n                        }\r\n                        this.logger.log(\"Running %s validator on element\", key, input);\r\n                        result = provider(input.value, input, directive.params);\r\n                        valid = false;\r\n                        error = directive.error;\r\n                        if (!(typeof result === 'boolean')) return [3 /*break*/, 2];\r\n                        valid = result;\r\n                        return [3 /*break*/, 5];\r\n                    case 2:\r\n                        if (!(typeof result === 'string')) return [3 /*break*/, 3];\r\n                        valid = false;\r\n                        error = result;\r\n                        return [3 /*break*/, 5];\r\n                    case 3: return [4 /*yield*/, result];\r\n                    case 4:\r\n                        resolution = _d.sent();\r\n                        if (typeof resolution === 'boolean') {\r\n                            valid = resolution;\r\n                        }\r\n                        else {\r\n                            valid = false;\r\n                            error = resolution;\r\n                        }\r\n                        _d.label = 5;\r\n                    case 5:\r\n                        if (!valid) {\r\n                            this.addError(input, error);\r\n                            return [2 /*return*/, false];\r\n                        }\r\n                        _d.label = 6;\r\n                    case 6:\r\n                        _i++;\r\n                        return [3 /*break*/, 1];\r\n                    case 7:\r\n                        this.removeError(input);\r\n                        return [2 /*return*/, true];\r\n                }\r\n            });\r\n        }); };\r\n    };\r\n    /**\r\n     * Checks if the provided input is hidden from the browser\r\n     * @param input\r\n     * @returns\r\n     */\r\n    ValidationService.prototype.isHidden = function (input) {\r\n        return !(this.allowHiddenFields || input.offsetWidth || input.offsetHeight || input.getClientRects().length);\r\n    };\r\n    /**\r\n     * Checks if the provided input is disabled\r\n     * @param input\r\n     * @returns\r\n     */\r\n    ValidationService.prototype.isDisabled = function (input) {\r\n        // If the input is validatable, we check the `disabled` property.\r\n        // Otherwise the `disabled` property is undefined and this returns false.\r\n        return input.disabled;\r\n    };\r\n    /**\r\n     * Adds addClass and removes removeClass\r\n     * @param element Element to modify\r\n     * @param addClass Class to add\r\n     * @param removeClass Class to remove\r\n     */\r\n    ValidationService.prototype.swapClasses = function (element, addClass, removeClass) {\r\n        if (addClass && !this.isDisabled(element) && !element.classList.contains(addClass)) {\r\n            element.classList.add(addClass);\r\n        }\r\n        if (element.classList.contains(removeClass)) {\r\n            element.classList.remove(removeClass);\r\n        }\r\n    };\r\n    /**\r\n     * Load default validation providers and scans the entire document when ready.\r\n     * @param options.watch If set to true, a MutationObserver will be used to continuously watch for new elements that provide validation directives.\r\n     * @param options.addNoValidate If set to true (the default), a novalidate attribute will be added to the containing form in validate elements.\r\n     */\r\n    ValidationService.prototype.bootstrap = function (options) {\r\n        var _this = this;\r\n        Object.assign(this.options, options);\r\n        this.addMvcProviders();\r\n        var document = window.document;\r\n        var root = this.options.root;\r\n        var init = function () {\r\n            _this.scan(root);\r\n            // Watch for further mutations after initial scan\r\n            if (_this.options.watch) {\r\n                _this.watch(root);\r\n            }\r\n        };\r\n        // If the document is done loading, scan it now.\r\n        if (document.readyState === 'complete' || document.readyState === 'interactive') {\r\n            init();\r\n        }\r\n        else {\r\n            // Otherwise wait until the document is done loading.\r\n            document.addEventListener('DOMContentLoaded', init);\r\n        }\r\n    };\r\n    /**\r\n     * Scans the root element for any validation directives and attaches behavior to them.\r\n     * @param root The root node to scan; if not provided, `options.root` (default: `document.body`) will be scanned\r\n     */\r\n    ValidationService.prototype.scan = function (root) {\r\n        root !== null && root !== void 0 ? root : (root = this.options.root);\r\n        this.logger.log('Scanning', root);\r\n        this.scanMessages(root, this.pushValidationMessageSpan);\r\n        this.scanInputs(root, this.addInput);\r\n    };\r\n    /**\r\n     * Scans the root element for any validation directives and removes behavior from them.\r\n     * @param root The root node to scan; if not provided, `options.root` (default: `document.body`) will be scanned\r\n     */\r\n    ValidationService.prototype.remove = function (root) {\r\n        root !== null && root !== void 0 ? root : (root = this.options.root);\r\n        this.logger.log('Removing', root);\r\n        this.scanMessages(root, this.removeValidationMessageSpan);\r\n        this.scanInputs(root, this.removeInput);\r\n    };\r\n    /**\r\n     * Watches the provided root element for mutations, and scans for new validation directives to attach behavior.\r\n     * @param root The root node to watch; if not provided, `options.root` (default: `document.body`) will be watched\r\n     */\r\n    ValidationService.prototype.watch = function (root) {\r\n        var _this = this;\r\n        root !== null && root !== void 0 ? root : (root = this.options.root);\r\n        this.observer = new MutationObserver(function (mutations) {\r\n            mutations.forEach(function (mutation) {\r\n                _this.observed(mutation);\r\n            });\r\n        });\r\n        this.observer.observe(root, {\r\n            attributes: true,\r\n            childList: true,\r\n            subtree: true\r\n        });\r\n        this.logger.log(\"Watching for mutations\");\r\n    };\r\n    ValidationService.prototype.observed = function (mutation) {\r\n        var _a, _b, _c;\r\n        if (mutation.type === 'childList') {\r\n            for (var i = 0; i < mutation.addedNodes.length; i++) {\r\n                var node = mutation.addedNodes[i];\r\n                this.logger.log('Added node', node);\r\n                if (node instanceof HTMLElement) {\r\n                    this.scan(node);\r\n                }\r\n            }\r\n            for (var i = 0; i < mutation.removedNodes.length; i++) {\r\n                var node = mutation.removedNodes[i];\r\n                this.logger.log('Removed node', node);\r\n                if (node instanceof HTMLElement) {\r\n                    this.remove(node);\r\n                }\r\n            }\r\n        }\r\n        else if (mutation.type === 'attributes') {\r\n            if (mutation.target instanceof HTMLElement) {\r\n                var attributeName = mutation.attributeName;\r\n                // Special case for disabled.\r\n                if (attributeName === 'disabled') {\r\n                    var target = mutation.target;\r\n                    this.reset(target);\r\n                }\r\n                else {\r\n                    var oldValue = (_a = mutation.oldValue) !== null && _a !== void 0 ? _a : '';\r\n                    var newValue = (_c = (_b = mutation.target.attributes[mutation.attributeName]) === null || _b === void 0 ? void 0 : _b.value) !== null && _c !== void 0 ? _c : '';\r\n                    this.logger.log(\"Attribute '%s' changed from '%s' to '%s'\", mutation.attributeName, oldValue, newValue, mutation.target);\r\n                    if (oldValue !== newValue) {\r\n                        this.scan(mutation.target);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Highlights invalid element by adding errorClass CSS class and removing validClass CSS class\r\n     * @param input Element to modify\r\n     * @param errorClass Class to add\r\n     * @param validClass Class to remove\r\n     */\r\n    ValidationService.prototype.highlight = function (input, errorClass, validClass) {\r\n        this.swapClasses(input, errorClass, validClass);\r\n    };\r\n    /**\r\n     * Unhighlight valid element by removing errorClass CSS class and adding validClass CSS class\r\n     * @param input Element to modify\r\n     * @param errorClass Class to remove\r\n     * @param validClass Class to add\r\n     */\r\n    ValidationService.prototype.unhighlight = function (input, errorClass, validClass) {\r\n        this.swapClasses(input, validClass, errorClass);\r\n    };\r\n    return ValidationService;\r\n}());\r\n\r\n\r\n/******/ \treturn __webpack_exports__;\r\n/******/ })()\r\n;\r\n});","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = (module) => {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","import \"./rizzy-nonce\"\r\nimport \"./rizzy-streaming\"\r\nimport { ValidationService } from \"./vendor/aspnet-validation/aspnet-validation\";\r\nimport \"./antiforgerySnippet.min\";\r\n\r\n// Set up ASP.NET validation\r\nlet validation = new ValidationService();\r\nvalidation.bootstrap({ watch: true });\r\n\r\nconst Rizzy = {\r\n    validation\r\n};\r\n\r\nwindow.Rizzy = { ...(window.Rizzy || {}), Rizzy };\r\n\r\nexport default Rizzy;"],"names":["document","body","attributes","__htmx_antiforgery","addEventListener","e","_htmx$config","_e$detail","detail","t","verb","r","parameters","n","headers","toUpperCase","i","htmx","config","antiforgery","a","headerName","o","requestToken","f","formFieldName","console","warn","boosted","xhr","responseText","indexOf","substring","s","match","d","m","querySelector","g","JSON","parse","l","error","c","createElement","setAttribute","replaceWith","defineExtension","transformResponse","text","elt","_htmx$config$document","documentNonce","inlineScriptNonce","refreshOnHistoryMiss","nonce","getResponseHeader","csp","cspMatch","window","location","hostname","responseURL","URL","processUnsafeHtml","newScriptNonce","replaceAll","parser","DOMParser","doc","parseFromString","Array","from","querySelectorAll","forEach","remove","elements","getAttribute","documentElement","outerHTML","_","api","enableDomPreservation","componentLoaded","blazorStreamingUpdate","_HTMLElement","_classCallCheck","_callSuper","arguments","_inherits","_createClass","key","value","connectedCallback","_blazorSsrElement$par","_htmx","blazorSsrElement","parentNode","removeChild","childNodes","node","HTMLTemplateElement","componentId","insertStreamingContentIntoDocument","content","process","_wrapNativeSuper","HTMLElement","init","apiRef","blazorSwapSsr","undefined","customElements","get","define","onEvent","name","evt","_htmx2","element","requestConfig","target","once","last","swapSpec","getSwapSpecification","cid","crypto","randomUUID","readyState","container","getElementById","unwrap","_document$getElementB","id","swap","swapStyle","diff","currentTarget","response","settleDelay","loaded","isCommentNodeInHead","commentNode","nodeType","Node","COMMENT_NODE","currentNode","head","start","end","docFrag","newDiv","wrap","appendChild","innerHTML","nextSibling","insertBefore","firstChild","handleOutOfBandSwaps","fragment","settleInfo","oobSelects","getClosestAttributeValue","oobSelectValues","split","length","oobSelectValue","trim","oobValue","oobElement","oobSwap","findAll","getAttributeValue","withExtensions","extension","getTarget","makeSettleInfo","elts","classList","add","settlingClass","triggerEvent","setTimeout","doSettle","tasks","task","call","componentIdAsString","markers","findStreamingMarkers","startMarker","endMarker","destinationRoot","existingContent","Range","setStart","textContent","setEnd","deleteContents","expectedStartText","concat","iterator","createNodeIterator","NodeFilter","SHOW_COMMENT","nextNode","expectedEndText","webpackUniversalModuleDefinition","root","factory","exports","_typeof","module","amd","self","__webpack_require__","definition","Object","defineProperty","enumerable","obj","prop","prototype","hasOwnProperty","Symbol","toStringTag","__webpack_exports__","MvcValidationProviders","ValidationService","isValidatable","__awaiter","thisArg","_arguments","P","generator","adopt","resolve","Promise","reject","fulfilled","step","next","rejected","result","done","then","apply","__generator","label","sent","trys","ops","y","v","op","TypeError","pop","push","nullLogger","class_1","globalThis","log","_args","_i","HTMLInputElement","HTMLSelectElement","HTMLTextAreaElement","validatableElementTypes","validatableSelector","selector","map","join","getRelativeFormElement","elementName","selectedName","objectName","dotLocation","lastIndexOf","relativeElementName","relativeElement","getElementsByName","form","required","params","elementType","type","toLowerCase","allElementsOfThisName","allElementsOfThisName_1","element_1","checked","checkboxHiddenInput","Boolean","stringLength","min","parseInt","max","compare","other","otherElement","range","val","parseFloat","isNaN","regex","pattern","RegExp","test","email","creditcard","nCheck","nDigit","bEven","cDigit","replace","charAt","url","lowerCaseValue","phone","consecutiveSeparator","remote","fieldSelectors","additionalfields","fields","fieldSelectors_1","fieldSelector","fieldName","substr","fieldElement","hasValue","encodedParams","encodedParam","encodeURIComponent","payload","ok","request","XMLHttpRequest","postData","FormData","append","open","setRequestHeader","send","onload","status","data","statusText","onerror","logger","_this","providers","messageFor","elementUIDs","elementByUID","formInputs","validators","formEvents","inputEvents","summary","debounce","allowHiddenFields","validateForm","callback","formUID","formValidationEvent","_a","_b","HTMLFormElement","Error","getElementUID","validateField","field","fieldUID","fieldValidationEvent","preValidate","submitEvent","preventDefault","stopImmediatePropagation","handleValidated","success","submitValidForm","focusFirstInvalid","newEvent","SubmitEvent","dispatchEvent","submitter","submitterInput","initialFormAction","action","name_1","formAction","submit","formInputUIDs","invalidFormInputUID","find","uid","firstInvalid","focus","isValid","prevalidate","formIsInvalid","some","isFieldValid","options","watch","addNoValidate","ValidationInputCssClassName","ValidationInputValidCssClassName","ValidationMessageCssClassName","ValidationMessageValidCssClassName","ValidationSummaryCssClassName","ValidationSummaryValidCssClassName","addProvider","addMvcProviders","mvc","scanMessages","cb","validationMessageElements","validationMessageElements_1","span","forms","containingForm","Element","closest","forms_1","validationMessageElements_3","validationMessageElements_2","pushValidationMessageSpan","_c","formId","formSpans","messageForId","spans","removeValidationMessageSpan","index","splice","parseDirectives","directives","validationAtributes","cut","_loop_1","keys","filter","Q","directive","pcut","pvalue","pkey","guid4","Math","random","toString","x","getFormValidationTask","formValidators","formInputUIDs_1","inputUID","validator","all","every","getMessageFor","input","shouldValidate","trackFormInput","validationTask","validationEvent","CustomEvent","valid","cbReset","formInputUIDs_2","inputUID_1","resetField","renderSummary","removeEventListener","reset","isDisabled","scan","swapClasses","untrackFormInput","indexToRemove","addInput","createValidator","event","validate","error_1","dataset","valEvent","contains","debounceTimeoutID","debounced","clearTimeout","defaultEvent","validateEvent","events","eventName","removeInput","scanInputs","inputs","createSummaryDOM","renderedMessages","ul","matchingElement","className","li","summaryElements","shadow","stringify","sort","renderedSummaryJSON","listElements","j","hasChildNodes","cloneNode","addError","message","highlight","removeError","unhighlight","provider","resolution","_d","isHidden","offsetWidth","offsetHeight","getClientRects","disabled","addClass","removeClass","bootstrap","assign","observer","MutationObserver","mutations","mutation","observed","observe","childList","subtree","addedNodes","removedNodes","attributeName","oldValue","newValue","errorClass","validClass","validation","Rizzy","_objectSpread"],"sourceRoot":""}